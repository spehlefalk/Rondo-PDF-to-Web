const __vite__fileDeps=["assets/PlanningBoardSpecific-h80V0UWK.js","assets/ArtesaTimePickerForCalendar.vue_vue_type_style_index_0_lang-BBYnsASy.js","assets/vendor-CJXdOFCa.js","assets/vendor-jIhZnUxc.css","assets/index-zBlMUfmj.js","assets/index-B3z-Az2g.js","assets/index-CgnmzLwJ.js","assets/index-M8nwXBBi.js","assets/index-Cpd7lwzu.css","assets/ArtesaTimePickerForCalendar-D-cEYG_s.css","assets/index-D4alReEY.js","assets/index-BCyjfQC_.js","assets/index-DrhtfMdY.js","assets/index-vAnxXWJT.js","assets/index-WYyZsZxJ.js","assets/floating-vue-FD3sxU32.js","assets/useAssignmentNameToShow-CT9dDVHV.js","assets/assignment-events.helpers-DEIAJbEv.js","assets/colorHelpers-D-IKRuV7.js","assets/index-C4Rzlq_k.js","assets/useIsUserOfRole-BciEmr9Y.js","assets/useRole-B2COsB3X.js","assets/PlanningBoardSpecific-C4060eTN.css","assets/FullCalendarSpecific-Brz-PyhX.js","assets/useFullcalendar-CGsOBmOU.js","assets/index-CsgZOv_I.js","assets/index-BVk_Mu3e.js","assets/index-CbtekCeJ.js","assets/index-DKugGBE7.js","assets/AssignmentEventName.vue_vue_type_script_setup_true_lang-BrVc5Ffk.js","assets/user-capabilities.store-CT1KSZFU.js","assets/gang-capabilities.store-Q4J3ULDu.js","assets/ArtesaTooltip-CzaCLuSr.js","assets/index.browser-DP16PUbO.js","assets/ArtesaTooltip-DtacCa5U.css","assets/user-absences.helpers-C55N6n0p.js","assets/FullCalendarSpecific-By-bnGRG.css","assets/AssignmentEventMap-BjwJHM7q.js","assets/TemplateVars.vue_vue_type_script_setup_true_lang-yzRNK3Xk.js","assets/useCompanySettingValue-DJ6odCGL.js","assets/addresses.helpers-58tAVzey.js","assets/ChangeEventUsers.vue_vue_type_script_setup_true_lang-DgRvO8Or.js","assets/PopperFeathersItems.vue_vue_type_script_setup_true_lang-hljKYvsA.js","assets/addLiteralPercentage-DRqvLqOk.js","assets/usePagination-Cs_oXynH.js","assets/ArtesaProfilePicture.vue_vue_type_script_setup_true_lang-CvX_tVhj.js","assets/AssignmentEventMap-QH2ZHkv0.css","assets/UntimedAssignments-CGxtsqaI.js"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{e as je,h as We,C as ve,s as gt,v as yt,D as _t,t as bt,E as wt,a as kt,F as he,G as Vt,I as St,J as xt,y as At,w as It,K as Et,_ as K}from"./index-M8nwXBBi.js";import{a as ge,Z as f,b as Q,o as V,e as T,f as a,h as t,i as _,t as b,g as A,c as e,f1 as Tt,er as Le,ep as Ne,eq as qe,f2 as Ce,f3 as Be,u as ze,r as W,dZ as Ft,aC as L,j as F,aD as $t,l as Je,eZ as He,e1 as Ze,e0 as ht,e2 as Ge,m as Qe,W as Ue,a3 as Ct,J as Bt,en as R,s as O,w as ue,V as de,aS as Pe,k as j,aj as Re,e6 as De,eh as me,ei as ce,e5 as pe,af as Ut,aF as X,aR as Pt}from"./vendor-CJXdOFCa.js";import{a as Rt,_ as Dt}from"./ArtesaTimePickerForCalendar.vue_vue_type_style_index_0_lang-BBYnsASy.js";import{i as Ot}from"./index-BwiYwWtV.js";import{u as Mt}from"./index-CsgZOv_I.js";import{_ as jt}from"./SelectAssignmentStatus.vue_vue_type_script_setup_true_lang-CGS--LgT.js";import{_ as Wt}from"./SelectAssignmentEventType.vue_vue_type_script_setup_true_lang-D-40_Wby.js";import{_ as Lt}from"./SelectProject.vue_vue_type_script_setup_true_lang-acfywV1j.js";import{_ as Nt}from"./SelectAssignmentType.vue_vue_type_script_setup_true_lang-DsFYchPC.js";import{_ as Oe}from"./SelectUser.vue_vue_type_script_setup_true_lang-81euLzTY.js";import{_ as qt}from"./SelectCustomer.vue_vue_type_script_setup_true_lang-DfY0-wua.js";import{_ as zt}from"./SelectAssignment.vue_vue_type_script_setup_true_lang-Cxd5Ad6L.js";import{u as Jt}from"./feature-flags.store-0QFsbhdu.js";import{u as Ht}from"./useAssignmentNameToShow-CT9dDVHV.js";import{u as Me,a as Zt}from"./useIdObjectMapper-DMCCNls8.js";import{u as fe}from"./useReactiveValueToRef-CWCNszNj.js";import{u as Gt}from"./useCanJustSeeOwnEvents-nSioK1d_.js";import"./index-zBlMUfmj.js";import"./index-B3z-Az2g.js";import"./index-CgnmzLwJ.js";import"./FeathersSelectAutocomplete.vue_vue_type_style_index_0_lang-D553730i.js";import"./addLiteralPercentage-DRqvLqOk.js";import"./index-C4Rzlq_k.js";import"./customers.helpers-B4XzAe7u.js";import"./useRole-B2COsB3X.js";const Qt=ge({__name:"AssignmentEventStatusTagFilter",props:{modelValue:{type:[String,null],required:!0}},emits:["update:modelValue"],setup(w,{emit:B}){const g=w,s=B,I=f(()=>g.modelValue?g.modelValue==="new"?"Entwurf":g.modelValue==="confirmed"?"geplant":"fertig":"Alle"),$=f(()=>g.modelValue?"dark":"plain"),r=f(()=>g.modelValue?g.modelValue==="new"?"warning":g.modelValue==="confirmed"?"info":"success":"info");function U(m){s("update:modelValue",m)}return(m,i)=>{const y=Q("font-awesome-icon"),x=Tt,o=Le,c=Ne,k=qe;return V(),T(k,{trigger:"click",onCommand:U},{dropdown:a(()=>[t(c,null,{default:a(()=>[t(o,{disabled:w.modelValue===null,command:null},{default:a(()=>[_(b(m.$t("All")),1)]),_:1},8,["disabled"]),t(o,{disabled:w.modelValue==="new",command:"new"},{default:a(()=>[_(b(m.$t("timeSheets.draft")),1)]),_:1},8,["disabled"]),t(o,{disabled:w.modelValue==="confirmed",command:"confirmed"},{default:a(()=>[_(b(m.$t("assignmentEventStatus.planned")),1)]),_:1},8,["disabled"]),t(o,{disabled:w.modelValue==="completed",command:"completed"},{default:a(()=>[_(b(m.$t("assignmentEventStatus.done")),1)]),_:1},8,["disabled"])]),_:1})]),default:a(()=>[A("div",null,[t(x,{type:e(r),size:"default",effect:e($)},{default:a(()=>[_(b(e(I))+" ",1),t(y,{icon:"angle-down",class:"text-xs"})]),_:1},8,["type","effect"])])]),_:1})}}}),Kt={key:0,class:"absolute -top-1.5 -right-1.5 w-3.5 h-3.5 rounded-full bg-danger border border-white z-50"},Xt={class:"flex justify-between gap-2"},Yt=ge({__name:"FilterEvents",props:Ce({hideAssignedUsers:{type:Boolean,default:!1},hideResetButton:{type:Boolean,default:!1}},{modelValue:{required:!0},modelModifiers:{},isVisible:{type:Boolean,default:!1},isVisibleModifiers:{}}),emits:Ce(["apply","reset"],["update:modelValue","update:isVisible"]),setup(w,{emit:B}){const g=w,s=Be(w,"modelValue"),I=Be(w,"isVisible"),$=B,{t:r}=ze(),U=je(),m=W(!0);Ft(()=>{m.value=!1});const i=f(()=>{for(const x in s.value){const o=x;if(o==="users"&&g.hideAssignedUsers)continue;const c=s.value[o];if(Array.isArray(c)){if(c.length>0)return!0}else if(c!=null)return!0}return!1});function y(){s.value["addressProperty.city"]=null,g.hideAssignedUsers||(s.value.users=null),s.value.assignment=null,s.value.assignmentType=null,s.value.bed=null,s.value.customer=null,s.value.eventTypes=[],s.value.project=null,s.value.serviceWorker=null,s.value.status=null,s.value.assignmentStatusType=null,s.value.postcodeFilter=null,I.value=!1,$("reset")}return(x,o)=>{const c=Q("font-awesome-icon"),k=Je,p=He,u=Ze,N=ht,z=Ge,M=Qe;return V(),L("div",null,[t(p,{class:"hidden lg:block"},{default:a(()=>[t(k,{type:"primary",plain:"",size:"default",onClick:o[0]||(o[0]=d=>I.value=!0)},{default:a(()=>[t(c,{icon:"filter",class:"text-xs"}),e(i)?(V(),L("div",Kt)):F("",!0)]),_:1}),e(i)&&!x.hideResetButton?(V(),T(k,{key:0,plain:"",type:"warning",size:"default",onClick:y},{default:a(()=>[t(c,{icon:"minus"})]),_:1})):F("",!0),$t(x.$slots,"default")]),_:3}),t(M,{"model-value":e(m)||I.value,class:"dialog-messagebox-[500px] self-start","align-center":"","append-to-body":"","onUpdate:modelValue":o[14]||(o[14]=d=>I.value=d)},{header:a(()=>[t(c,{icon:"filter",class:"text-sm mr-2"}),_(" "+b(e(r)("planningBoard.filter.title")),1)]),footer:a(()=>[A("div",Xt,[A("div",null,[e(i)?(V(),T(k,{key:0,text:"",onClick:y},{default:a(()=>[t(c,{icon:"trash-alt",class:"mr-2 text-xs"}),_(" "+b(e(r)("planningBoard.filter.reset")),1)]),_:1})):F("",!0)]),t(k,{type:"primary",onClick:o[13]||(o[13]=()=>I.value=!1)},{default:a(()=>[_(b(e(r)("planningBoard.filter.apply")),1)]),_:1})])]),default:a(()=>[t(z,{"label-width":"130px","label-position":e(U).sm?"left":"top"},{default:a(()=>[t(u,{label:e(r)("assignmentEvent.name")+":"},{default:a(()=>[t(Wt,{"model-value":s.value.eventTypes??[],clearable:"","collapse-tags":"","show-select-all":"","clear-on-select-all":"",class:"w-full",multi:!0,"onUpdate:modelValue":o[1]||(o[1]=d=>s.value.eventTypes=d)},null,8,["model-value"])]),_:1},8,["label"]),t(u,{label:e(r)("assignment.name")+":"},{default:a(()=>[t(zt,{modelValue:s.value.assignment,"onUpdate:modelValue":o[2]||(o[2]=d=>s.value.assignment=d),clearable:"",class:"w-full"},null,8,["modelValue"])]),_:1},8,["label"]),t(u,{label:e(r)("project.property.number")+":"},{default:a(()=>[t(Lt,{modelValue:s.value.project,"onUpdate:modelValue":o[3]||(o[3]=d=>s.value.project=d),clearable:"",class:"w-full"},null,8,["modelValue"])]),_:1},8,["label"]),t(u,{label:e(r)("assignment-types.name")+":"},{default:a(()=>[t(Nt,{modelValue:s.value.assignmentType,"onUpdate:modelValue":o[4]||(o[4]=d=>s.value.assignmentType=d),clearable:"",class:"w-full"},null,8,["modelValue"])]),_:1},8,["label"]),x.hideAssignedUsers?F("",!0):(V(),T(u,{key:0,label:e(r)("planningBoard.filter.assignedEmployees")+":"},{default:a(()=>[t(Oe,{modelValue:s.value.users,"onUpdate:modelValue":o[5]||(o[5]=d=>s.value.users=d),clearable:"",multi:"","show-select-all":"","clear-on-select-all":"","collapse-tags":"",class:"w-full"},null,8,["modelValue"])]),_:1},8,["label"])),t(u,{label:e(r)("assignmentEventStatus.name")+":"},{default:a(()=>[t(Qt,{modelValue:s.value.status,"onUpdate:modelValue":o[6]||(o[6]=d=>s.value.status=d)},null,8,["modelValue"])]),_:1},8,["label"]),t(u,{label:e(r)("assignment.relation.serviceWorker")+":"},{default:a(()=>[t(Oe,{modelValue:s.value.serviceWorker,"onUpdate:modelValue":o[7]||(o[7]=d=>s.value.serviceWorker=d),clearable:"","collapse-tags":"","show-select-all":"","clear-on-select-all":"",class:"w-full"},null,8,["modelValue"])]),_:1},8,["label"]),t(u,{label:e(r)("customer.name")+":"},{default:a(()=>[t(qt,{modelValue:s.value.customer,"onUpdate:modelValue":o[8]||(o[8]=d=>s.value.customer=d),limit:20,"label-field":["fullName","companyName","email"],clearable:"",class:"w-full"},null,8,["modelValue"])]),_:1},8,["label"]),t(u,{label:e(r)("city")+":"},{default:a(()=>[t(N,{modelValue:s.value["addressProperty.city"],"onUpdate:modelValue":o[9]||(o[9]=d=>s.value["addressProperty.city"]=d),class:"w-full",placeholder:e(r)("assignment.form.addressPropertyShort"),clearable:"",onClear:o[10]||(o[10]=()=>s.value["addressProperty.city"]=null)},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(u,{label:e(r)("assignmentStatusTypes.extendedName")+":"},{default:a(()=>[t(jt,{modelValue:s.value.assignmentStatusType,"onUpdate:modelValue":o[11]||(o[11]=d=>s.value.assignmentStatusType=d),class:"w-full",clearable:""},null,8,["modelValue"])]),_:1},8,["label"]),t(u,{label:e(r)("addresses.postcodeShort")+":"},{default:a(()=>[t(N,{modelValue:s.value.postcodeFilter,"onUpdate:modelValue":o[12]||(o[12]=d=>s.value.postcodeFilter=d),clearable:"",placeholder:e(r)("addresses.postcode")},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1},8,["label-position"])]),_:1},8,["model-value"])])}}}),es={"addressProperty.city":null,users:null,assignment:null,assignmentType:null,bed:null,customer:null,eventTypes:[],project:null,serviceWorker:null,status:null,assignmentStatusType:null,postcodeFilter:null};function ts(){return Bt(es)}function ss(w){const B=w.companyId?Ue(w.companyId):We(),g=Ue(w.dateRange),s=Ct({...ts(),eventTypes:w.eventTypes??[],users:w.users??[],assignmentStatusType:w.assignmentStatusType??null,postcodeFilter:w.postcodeFilter??null});function I(m){if(s.eventTypes?.length){const i=s.eventTypes.map(y=>y.id).filter(ve);if(!i.length)return;m.typeId=i.length===1?i[0]:{$in:i}}}function $(m){s.status&&(s.status==="new"?m.confirmedAt=null:s.status==="completed"?m.completedAt={$ne:null}:s.status==="confirmed"&&(m.confirmedAt={$ne:null},m.completedAt=null))}const r=f(()=>{if(!g.value)return null;const m={query:{companyId:B.value,startsAt:{$lt:g.value.endsAt},endsAt:{$gte:g.value.startsAt},$sort:{startsAt:1},$limit:-1}},{query:i}=m;let y=!1;I(i),$(i);const{customer:x}=s;x?.id&&(R(i,"assignment.customerId",x.id),y=!0);const{project:o}=s;o?.id&&(R(i,"assignment.projectId",o.id),y=!0);const{assignment:c}=s;c?.id&&(i.assignmentId=c.id);const{assignmentType:k}=s;k?.id&&(R(i,"assignment.typeId",k.id),y=!0);const p=s.serviceWorker;p?.id&&(R(i,"assignment.serviceWorkerId",p.id),y=!0);const u=s["addressProperty.city"];return u&&(R(i,"assignment.addressProperty.city",{$regex:new RegExp(`^.*(${u}).*$`,"gim")}),y=!0),s.assignmentStatusType&&(R(i,"assignment.statusId",s.assignmentStatusType.id),y=!0),s.postcodeFilter&&(R(i,"assignment.addressProperty.zip",{$iLike:`${s.postcodeFilter}%`}),y=!0),y&&(m.resultFrom="server"),m}),U=f(()=>{if(!g.value)return null;const m={query:{companyId:B.value,startsAt:{$lt:g.value.endsAt},endsAt:{$gte:g.value.startsAt},$sort:{startsAt:1},$limit:-1},debounceTime:250,$populateParams:{name:"forPlanningBoard"}},{query:i}=m;I(i),$(i);const{customer:y}=s;y?.id&&R(i,"assignment.customerId",y.id);const{project:x}=s;x?.id&&(i["assignment.projectId"]=x.id);const{assignment:o}=s;o?.id&&(i.assignmentId=o.id);const{assignmentType:c}=s;c?.id&&(i["assignment.typeId"]=c.id);const k=s.serviceWorker;k?.id&&(i["assignment.serviceWorkerId"]=k.id);const p=s["addressProperty.city"];return p&&(i["assignment.addressProperty.city"]={$iLike:`%${p}%`}),s.assignmentStatusType&&(i["assignment.statusId"]=s.assignmentStatusType.id),s.postcodeFilter&&(i["assignment.addressProperty.zip"]={$iLike:`${s.postcodeFilter}%`}),m});return{filters:s,paramsFilter:r,fetchParamsFilter:U}}const ls={id:"view-planning-board",class:"flex flex-col"},as={class:"flex justify-between items-center gap-1"},ns={class:"flex items-center mb-2 gap-2"},os={class:"flex flex-1 justify-center mb-2"},rs={class:"flex"},is={class:"hidden lg:block mb-2"},us={class:"-ml-2"},ds={class:"mb-2"},ms={key:0,class:"w-52 flex-none hidden md:block"},cs={class:"w-full flex gap-2 flex-wrap"},ps={class:"-ml-2"},fs=X(()=>K(()=>import("./PlanningBoardSpecific-h80V0UWK.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22]))),vs=X(()=>K(()=>import("./FullCalendarSpecific-Brz-PyhX.js"),__vite__mapDeps([23,1,2,3,4,5,6,7,8,9,24,25,26,27,28,29,17,18,19,16,30,31,32,33,34,35,20,21,36]))),gs=X(()=>K(()=>import("./AssignmentEventMap-BjwJHM7q.js"),__vite__mapDeps([37,38,2,3,7,8,39,17,18,19,40,41,42,15,43,44,45,32,33,34,30,46]))),ys=X(()=>K(()=>import("./UntimedAssignments-CGxtsqaI.js"),__vite__mapDeps([47,2,3,7,8,29,16,17,18,19,43]))),Ns=ge({__name:"ViewPlanningBoard",setup(w){const B=Ut(),g=W(),s=W(),I=W(),$=W(),{t:r}=ze(),U=je(),m=We(),{assignmentNameToShow:i,toggle:y}=Ht(),o=Jt().isEnabled("PlanningBoardMap"),c=gt(yt.ViewAssemblyBoard,n=>({view:n.literal(["calendar","resource","map"],{default:"calendar",restore:!0}),res:n.literal(["day","week","month","board"],{default:"board",restore:!0}),types:n.array(n.id(),{default:()=>[],restore:!0}),user:n.array(n.id(),{default:()=>[],restore:!0}),status:n.id({default:void 0,restore:!0})})),k=O(!1),p=f({get(){return c.view==="resource"?"resource":c.view==="map"?"map":"calendar"},set(n){c.view=n}}),u=f({get(){return c.res==="day"?"day":c.res==="week"?"week":c.res==="month"?"month":"board"},set(n){c.res=n}}),N=f(()=>u.value==="day"?r("Day"):u.value==="week"?r("Week"):u.value==="month"?r("calendar.month"):r("planningBoard.name")),z=f(()=>[{resolution:"day",title:r("Day")},{resolution:"week",title:r("Week")},{resolution:"month",title:r("calendar.month")},{resolution:"board",title:r("planningBoard.name")}]),M=O("startsAt"),d=O(!1),ye=f(()=>!_e(p.value,u.value)&&p.value!=="map"),Y=f(()=>B.name),D=f(()=>Y.value!=="ViewAssemblyBoard"?!1:_e(p.value,u.value)),J=f(()=>Y.value!=="ViewAssemblyBoard"?!1:p.value==="map");ue(()=>Y.value==="ViewAssemblyBoard",()=>{D.value&&$.value?.rerender()}),de(d,()=>{D.value&&$.value?.rerender()});const ee=W(D.value);ue(()=>D.value&&!ee.value,()=>{ee.value=!0});function _e(n,l){return l!=="board"&&n!=="map"}const te=O(J.value);ue(()=>J.value&&!te.value,()=>{te.value=!0});function P({name:n,resolution:l}){n=n||p.value,l=l||u.value,n==="map"&&(l="day"),!(n===p.value&&l===u.value)&&(p.value=n,u.value=l)}const h=O(at(new Date,{subOnMonday:!0})),H=O(null),Z=O(null),se=f(()=>ye.value?H.value:p.value==="map"?{startsAt:Pe(h.value),endsAt:Pt(h.value)}:Z.value),Ke=_t().createScope(),Xe=bt().createScope(),Ye=wt().createScope(),et=kt(),tt=Me(fe(c,"types"),Ke),st=Me(fe(c,"user"),Xe),lt=Zt(fe(c,"status"),Ye),be=Gt(),{filters:C,paramsFilter:we,fetchParamsFilter:ke}=ss({eventTypes:tt,dateRange:se,companyId:m,users:st,assignmentStatusType:lt});de([be,et],([n,l])=>{n&&l&&(C.users=[l])},{immediate:!0});function at(n,l){return["month","board"].includes(u.value)?(n=Ot(n)&&l?.subOnMonday?Rt(n,{weeks:-1}):n,n=he(n)):u.value==="week"?n=he(n):n=Pe(n),n}const nt=f(()=>["month","board"].includes(u.value)||u.value==="week"?"week":"date"),ot=f(()=>u.value==="board"?I.value?.stepsMove??1:u.value==="month"?2:1),Ve=Vt().createScope(),{data:q,isPending:Se,haveLoaded:xe}=Ve.useFeathersItems({params:we,fetchParams:ke}),Ae=f(()=>q.value.map(n=>n.id).filter(ve)),rt=f(()=>[...new Set(q.value.map(n=>n.assignmentId))]);St({items:rt,debounceTime:250,action:async n=>{(await It.service("assignment-events-last-completed").find({query:{assignmentIds:n}})).forEach(S=>Ve.construct(S))}});const it=xt().createScope(),{data:le,hasLoaded:ut}=it.useFindOnce({items:Ae,params:f(()=>({query:{eventId:{$in:Ae.value}}})),fetchParams:n=>({query:{eventId:{$in:n},$limit:-1}}),debounceTime:150,watchOnlyIf:xe}),dt=At().createScope(),{data:Ie,haveLoaded:mt}=dt.useFind({params:f(()=>{if(!se.value)return null;const{startsAt:n,endsAt:l}=se.value;return!m.value||!n||!l?null:{query:{companyId:m.value,startsAt:{$lt:l},endsAt:{$gt:n},$limit:-1}}})}),Ee=f(()=>C.users?C.users.map(n=>n.id).filter(ve):[]),ct=f(()=>{const n=Ee.value;return le.value.filter(l=>n.includes(l.userId))}),ae=f(()=>{if(!Ee.value.length)return q.value;const n=ct.value.map(l=>l.eventId);return q.value.filter(l=>n.includes(l.id))});function ne(n){Et({name:"AssemblyBoard.DetailedAssignment",params:{assignmentId:n.assignmentId.toString()}})}let G;return de(g,n=>{if(G&&(G.destroy(),G=null),n)try{G=new Mt(n.$el,{itemSelector:".drag-assignment-event"})}catch(l){console.error(l)}}),(n,l)=>{const S=Q("font-awesome-icon"),E=Je,Te=Le,Fe=Ne,$e=qe,oe=He,pt=Q("router-view"),re=Ze,ft=Ge,vt=Qe;return V(),L("div",ls,[A("div",as,[A("div",ns,[e(D)?(V(),T(E,{key:0,type:e(d)?"primary":void 0,class:"!hidden md:!block",onClick:l[0]||(l[0]=()=>d.value=!e(d))},{default:a(()=>[t(S,{icon:["far","calendar-plus"]})]),_:1},8,["type"])):F("",!0),t(Yt,{ref_key:"refFilterEvents",ref:s,modelValue:e(C),"onUpdate:modelValue":l[1]||(l[1]=v=>j(C)?C.value=v:null),"hide-assigned-users":e(be),"hide-reset-button":!e(U).md},null,8,["modelValue","hide-assigned-users","hide-reset-button"])]),A("div",os,[A("div",rs,[t(Dt,{modelValue:e(h),"onUpdate:modelValue":l[2]||(l[2]=v=>j(h)?h.value=v:null),"class-button-today":"hidden md:block",resolution:e(nt),step:e(ot)},null,8,["modelValue","resolution","step"])])]),A("div",is,[t(oe,null,{default:a(()=>[t(E,{type:e(p)==="calendar"?"primary":void 0,onClick:l[3]||(l[3]=()=>P({name:"calendar"}))},{default:a(()=>[t(S,{icon:["far","calendar-alt"],class:"text-xs"})]),_:1},8,["type"]),t(E,{type:e(p)==="resource"?"primary":void 0,onClick:l[4]||(l[4]=()=>P({name:"resource"}))},{default:a(()=>[t(S,{icon:"user",class:"text-xs"})]),_:1},8,["type"]),e(o)?(V(),T(E,{key:0,type:e(p)==="map"?"primary":void 0,onClick:l[5]||(l[5]=()=>P({name:"map"}))},{default:a(()=>[t(S,{icon:"map",class:"text-xs"})]),_:1},8,["type"])):F("",!0),t($e,{"hide-on-click":!1,disabled:e(p)==="map"},{dropdown:a(()=>[t(Fe,null,{default:a(()=>[(V(!0),L(Re,null,De(e(z),({resolution:v,title:ie})=>(V(),T(Te,{key:v,disabled:e(u)===v,onClick:()=>P({resolution:v})},{default:a(()=>[A("div",us,[t(S,{icon:"check","fixed-width":"",class:pe(["mr-1 text-xs",{"opacity-0":e(u)!==v}])},null,8,["class"]),_(" "+b(ie),1)])]),_:2},1032,["disabled","onClick"]))),128))]),_:1})]),default:a(()=>[t(E,{disabled:e(p)==="map"},{default:a(()=>[_(b(e(N))+" ",1),t(S,{icon:"angle-down",class:"ml-1 text-xs"})]),_:1},8,["disabled"])]),_:1},8,["disabled"])]),_:1})]),A("div",ds,[t(E,{type:"primary",onClick:l[6]||(l[6]=()=>k.value=!0)},{default:a(()=>[t(S,{icon:"cog",class:"text-xs"})]),_:1})])]),A("div",{class:pe(["flex",[e(J)&&"h-full flex-grow flex-col"]])},[e(d)&&e(D)?(V(),L("div",ms,[_(b(n.$t("underminedOrders"))+" ",1),t(e(ys),{ref_key:"refUntimedAssignments",ref:g,params:e(we)??void 0,"fetch-params":e(ke)??void 0,class:"mr-2"},null,8,["params","fetch-params"])])):F("",!0),A("div",null,[me(t(e(fs),{ref_key:"refPlanningBoard",ref:I,dateRange:e(H),"onUpdate:dateRange":l[7]||(l[7]=v=>j(H)?H.value=v:null),items:e(ae),"is-pending":e(Se),view:e(p),"start-date":e(h),"event-types":e(C).eventTypes?e(C).eventTypes:void 0,"event-users":e(le),holidays:e(Ie),onClickedItem:ne},null,8,["dateRange","items","is-pending","view","start-date","event-types","event-users","holidays"]),[[ce,e(ye)]]),e(ee)?me((V(),T(e(vs),{key:0,ref_key:"refFullCalendar",ref:$,dateRange:e(Z),"onUpdate:dateRange":l[8]||(l[8]=v=>j(Z)?Z.value=v:null),startDate:e(h),"onUpdate:startDate":l[9]||(l[9]=v=>j(h)?h.value=v:null),"is-pending":e(Se),"initially-loading":!e(xe)&&!e(ut)&&!e(mt),"all-events":e(q),events:e(ae),"event-types":e(C).eventTypes,users:e(C).users,holidays:e(Ie),"event-users":e(le),view:e(p),resolution:e(u)==="board"?"week":e(u),onClickedItem:ne},null,8,["dateRange","startDate","is-pending","initially-loading","all-events","events","event-types","users","holidays","event-users","view","resolution"])),[[ce,e(D)]]):F("",!0)]),e(te)?me((V(),T(e(gs),{key:1,date:e(h),events:e(ae),class:"flex flex-grow",onClickedItem:ne},null,8,["date","events"])),[[ce,e(J)]]):F("",!0)],2),t(pt),e(k)?(V(),T(vt,{key:0,modelValue:e(k),"onUpdate:modelValue":l[16]||(l[16]=v=>j(k)?k.value=v:null),class:"dialog-messagebox-[500px] self-start"},{header:a(()=>[t(S,{icon:"cog",class:"mr-2 text-xs"}),_(" "+b(e(r)("planningBoard.settings.title")),1)]),default:a(()=>[t(ft,{"label-width":"90px","label-position":e(U).xs?"left":"top"},{default:a(()=>[t(re,{label:e(r)("planningBoard.settings.View")+":"},{default:a(()=>[A("div",cs,[t(oe,null,{default:a(()=>[t(E,{type:e(p)==="calendar"?"primary":void 0,onClick:l[10]||(l[10]=()=>P({name:"calendar"}))},{default:a(()=>[t(S,{icon:["far","calendar-alt"],class:"text-xs mr-1"}),_(" "+b(e(r)("calendar.calendar")),1)]),_:1},8,["type"]),t(E,{type:e(p)==="resource"?"primary":void 0,onClick:l[11]||(l[11]=()=>P({name:"resource"}))},{default:a(()=>[t(S,{icon:"user",class:"text-xs mr-1"}),_(" "+b(e(r)("Employee")),1)]),_:1},8,["type"]),e(o)?(V(),T(E,{key:0,type:e(p)==="map"?"primary":void 0,onClick:l[12]||(l[12]=()=>P({name:"map"}))},{default:a(()=>[t(S,{icon:"map",class:"text-xs mr-1"}),_(" "+b(e(r)("planningBoard.map")),1)]),_:1},8,["type"])):F("",!0)]),_:1}),t($e,null,{dropdown:a(()=>[t(Fe,null,{default:a(()=>[(V(!0),L(Re,null,De(e(z),({resolution:v,title:ie})=>(V(),T(Te,{key:v,disabled:e(u)===v,onClick:()=>P({resolution:v})},{default:a(()=>[A("div",ps,[t(S,{icon:"check","fixed-width":"",class:pe(["mr-1 text-xs",{"opacity-0":e(u)!==v}])},null,8,["class"]),_(" "+b(ie),1)])]),_:2},1032,["disabled","onClick"]))),128))]),_:1})]),default:a(()=>[t(E,null,{default:a(()=>[_(b(e(N))+" ",1),t(S,{icon:"angle-down",class:"ml-1 text-xs"})]),_:1})]),_:1})])]),_:1},8,["label"]),t(re,{label:e(r)("planningBoard.settings.Sorting")+":"},{default:a(()=>[t(oe,null,{default:a(()=>[t(E,{type:e(M)==="startsAt"?"primary":void 0,onClick:l[13]||(l[13]=()=>M.value="startsAt")},{default:a(()=>[_(b(e(r)("Date")),1)]),_:1},8,["type"]),t(E,{type:e(M)==="assignment.serviceWorkerId"?"primary":void 0,onClick:l[14]||(l[14]=()=>M.value="assignment.serviceWorkerId")},{default:a(()=>[_(b(e(r)("assignment.relation.serviceWorker")),1)]),_:1},8,["type"])]),_:1})]),_:1},8,["label"]),t(re,{label:e(r)("planningBoard.settings.Text")+":"},{default:a(()=>[t(E,{onClick:l[15]||(l[15]=()=>e(y)())},{default:a(()=>[_(b(e(i)==="name"?e(r)("assignment.property.name"):e(i)==="number"?e(r)("assignment.property.number"):e(i)==="addressProperty"?e(r)("assignment.relation.addressProperty"):e(i)==="customer"?e(r)("assignment.relation.customer"):""),1)]),_:1})]),_:1},8,["label"])]),_:1},8,["label-position"])]),_:1},8,["modelValue"])):F("",!0)])}}});export{Ns as default};
