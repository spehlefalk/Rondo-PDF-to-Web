import{S as qr,a$ as kr}from"./index-M8nwXBBi.js";import{a9 as jr,Z as oe}from"./vendor-CJXdOFCa.js";var Yr;function N(){}N.prototype=Object.create(null);function d(){d.init.call(this)}d.EventEmitter=d;d.usingDomains=!1;d.prototype.domain=void 0;d.prototype._events=void 0;d.prototype._maxListeners=void 0;d.defaultMaxListeners=10;d.init=function(){this.domain=null,d.usingDomains&&Yr.active,(!this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=new N,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};d.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||isNaN(e))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=e,this};function Qe(r){return r._maxListeners===void 0?d.defaultMaxListeners:r._maxListeners}d.prototype.getMaxListeners=function(){return Qe(this)};function Wr(r,e,t){if(e)r.call(t);else for(var i=r.length,n=ee(r,i),o=0;o<i;++o)n[o].call(t)}function Fr(r,e,t,i){if(e)r.call(t,i);else for(var n=r.length,o=ee(r,n),a=0;a<n;++a)o[a].call(t,i)}function $r(r,e,t,i,n){if(e)r.call(t,i,n);else for(var o=r.length,a=ee(r,o),s=0;s<o;++s)a[s].call(t,i,n)}function zr(r,e,t,i,n,o){if(e)r.call(t,i,n,o);else for(var a=r.length,s=ee(r,a),u=0;u<a;++u)s[u].call(t,i,n,o)}function Jr(r,e,t,i){if(e)r.apply(t,i);else for(var n=r.length,o=ee(r,n),a=0;a<n;++a)o[a].apply(t,i)}d.prototype.emit=function(e){var t,i,n,o,a,s,u,c=e==="error";if(s=this._events,s)c=c&&s.error==null;else if(!c)return!1;if(u=this.domain,c){if(t=arguments[1],u)t||(t=new Error('Uncaught, unspecified "error" event')),t.domainEmitter=this,t.domain=u,t.domainThrown=!1,u.emit("error",t);else{if(t instanceof Error)throw t;var h=new Error('Uncaught, unspecified "error" event. ('+t+")");throw h.context=t,h}return!1}if(i=s[e],!i)return!1;var l=typeof i=="function";switch(n=arguments.length,n){case 1:Wr(i,l,this);break;case 2:Fr(i,l,this,arguments[1]);break;case 3:$r(i,l,this,arguments[1],arguments[2]);break;case 4:zr(i,l,this,arguments[1],arguments[2],arguments[3]);break;default:for(o=new Array(n-1),a=1;a<n;a++)o[a-1]=arguments[a];Jr(i,l,this,o)}return!0};function Ze(r,e,t,i){var n,o,a;if(typeof t!="function")throw new TypeError('"listener" argument must be a function');if(o=r._events,o?(o.newListener&&(r.emit("newListener",e,t.listener?t.listener:t),o=r._events),a=o[e]):(o=r._events=new N,r._eventsCount=0),!a)a=o[e]=t,++r._eventsCount;else if(typeof a=="function"?a=o[e]=i?[t,a]:[a,t]:i?a.unshift(t):a.push(t),!a.warned&&(n=Qe(r),n&&n>0&&a.length>n)){a.warned=!0;var s=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+e+" listeners added. Use emitter.setMaxListeners() to increase limit");s.name="MaxListenersExceededWarning",s.emitter=r,s.type=e,s.count=a.length,Vr(s)}return r}function Vr(r){typeof console.warn=="function"?console.warn(r):console.log(r)}d.prototype.addListener=function(e,t){return Ze(this,e,t,!1)};d.prototype.on=d.prototype.addListener;d.prototype.prependListener=function(e,t){return Ze(this,e,t,!0)};function Ke(r,e,t){var i=!1;function n(){r.removeListener(e,n),i||(i=!0,t.apply(r,arguments))}return n.listener=t,n}d.prototype.once=function(e,t){if(typeof t!="function")throw new TypeError('"listener" argument must be a function');return this.on(e,Ke(this,e,t)),this};d.prototype.prependOnceListener=function(e,t){if(typeof t!="function")throw new TypeError('"listener" argument must be a function');return this.prependListener(e,Ke(this,e,t)),this};d.prototype.removeListener=function(e,t){var i,n,o,a,s;if(typeof t!="function")throw new TypeError('"listener" argument must be a function');if(n=this._events,!n)return this;if(i=n[e],!i)return this;if(i===t||i.listener&&i.listener===t)--this._eventsCount===0?this._events=new N:(delete n[e],n.removeListener&&this.emit("removeListener",e,i.listener||t));else if(typeof i!="function"){for(o=-1,a=i.length;a-- >0;)if(i[a]===t||i[a].listener&&i[a].listener===t){s=i[a].listener,o=a;break}if(o<0)return this;if(i.length===1){if(i[0]=void 0,--this._eventsCount===0)return this._events=new N,this;delete n[e]}else Hr(i,o);n.removeListener&&this.emit("removeListener",e,s||t)}return this};d.prototype.removeAllListeners=function(e){var t,i;if(i=this._events,!i)return this;if(!i.removeListener)return arguments.length===0?(this._events=new N,this._eventsCount=0):i[e]&&(--this._eventsCount===0?this._events=new N:delete i[e]),this;if(arguments.length===0){for(var n=Object.keys(i),o=0,a;o<n.length;++o)a=n[o],a!=="removeListener"&&this.removeAllListeners(a);return this.removeAllListeners("removeListener"),this._events=new N,this._eventsCount=0,this}if(t=i[e],typeof t=="function")this.removeListener(e,t);else if(t)do this.removeListener(e,t[t.length-1]);while(t[0]);return this};d.prototype.listeners=function(e){var t,i,n=this._events;return n?(t=n[e],t?typeof t=="function"?i=[t.listener||t]:i=Gr(t):i=[]):i=[],i};d.listenerCount=function(r,e){return typeof r.listenerCount=="function"?r.listenerCount(e):Xe.call(r,e)};d.prototype.listenerCount=Xe;function Xe(r){var e=this._events;if(e){var t=e[r];if(typeof t=="function")return 1;if(t)return t.length}return 0}d.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};function Hr(r,e){for(var t=e,i=t+1,n=r.length;i<n;t+=1,i+=1)r[t]=r[i];r.pop()}function ee(r,e){for(var t=new Array(e);e--;)t[e]=r[e];return t}function Gr(r){for(var e=new Array(r.length),t=0;t<e.length;++t)e[t]=r[t].listener||r[t];return e}var G=typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{},L=[],S=[],Qr=typeof Uint8Array<"u"?Uint8Array:Array,Ce=!1;function er(){Ce=!0;for(var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=0,t=r.length;e<t;++e)L[e]=r[e],S[r.charCodeAt(e)]=e;S[45]=62,S[95]=63}function Zr(r){Ce||er();var e,t,i,n,o,a,s=r.length;if(s%4>0)throw new Error("Invalid string. Length must be a multiple of 4");o=r[s-2]==="="?2:r[s-1]==="="?1:0,a=new Qr(s*3/4-o),i=o>0?s-4:s;var u=0;for(e=0,t=0;e<i;e+=4,t+=3)n=S[r.charCodeAt(e)]<<18|S[r.charCodeAt(e+1)]<<12|S[r.charCodeAt(e+2)]<<6|S[r.charCodeAt(e+3)],a[u++]=n>>16&255,a[u++]=n>>8&255,a[u++]=n&255;return o===2?(n=S[r.charCodeAt(e)]<<2|S[r.charCodeAt(e+1)]>>4,a[u++]=n&255):o===1&&(n=S[r.charCodeAt(e)]<<10|S[r.charCodeAt(e+1)]<<4|S[r.charCodeAt(e+2)]>>2,a[u++]=n>>8&255,a[u++]=n&255),a}function Kr(r){return L[r>>18&63]+L[r>>12&63]+L[r>>6&63]+L[r&63]}function Xr(r,e,t){for(var i,n=[],o=e;o<t;o+=3)i=(r[o]<<16)+(r[o+1]<<8)+r[o+2],n.push(Kr(i));return n.join("")}function ke(r){Ce||er();for(var e,t=r.length,i=t%3,n="",o=[],a=16383,s=0,u=t-i;s<u;s+=a)o.push(Xr(r,s,s+a>u?u:s+a));return i===1?(e=r[t-1],n+=L[e>>2],n+=L[e<<4&63],n+="=="):i===2&&(e=(r[t-2]<<8)+r[t-1],n+=L[e>>10],n+=L[e>>4&63],n+=L[e<<2&63],n+="="),o.push(n),o.join("")}function he(r,e,t,i,n){var o,a,s=n*8-i-1,u=(1<<s)-1,c=u>>1,h=-7,l=t?n-1:0,p=t?-1:1,w=r[e+l];for(l+=p,o=w&(1<<-h)-1,w>>=-h,h+=s;h>0;o=o*256+r[e+l],l+=p,h-=8);for(a=o&(1<<-h)-1,o>>=-h,h+=i;h>0;a=a*256+r[e+l],l+=p,h-=8);if(o===0)o=1-c;else{if(o===u)return a?NaN:(w?-1:1)*(1/0);a=a+Math.pow(2,i),o=o-c}return(w?-1:1)*a*Math.pow(2,o-i)}function rr(r,e,t,i,n,o){var a,s,u,c=o*8-n-1,h=(1<<c)-1,l=h>>1,p=n===23?Math.pow(2,-24)-Math.pow(2,-77):0,w=i?0:o-1,m=i?1:-1,y=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=h):(a=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-a))<1&&(a--,u*=2),a+l>=1?e+=p/u:e+=p*Math.pow(2,1-l),e*u>=2&&(a++,u/=2),a+l>=h?(s=0,a=h):a+l>=1?(s=(e*u-1)*Math.pow(2,n),a=a+l):(s=e*Math.pow(2,l-1)*Math.pow(2,n),a=0));n>=8;r[t+w]=s&255,w+=m,s/=256,n-=8);for(a=a<<n|s,c+=n;c>0;r[t+w]=a&255,w+=m,a/=256,c-=8);r[t+w-m]|=y*128}var et={}.toString,tr=Array.isArray||function(r){return et.call(r)=="[object Array]"},rt=50;f.TYPED_ARRAY_SUPPORT=G.TYPED_ARRAY_SUPPORT!==void 0?G.TYPED_ARRAY_SUPPORT:!0;fe();function fe(){return f.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function C(r,e){if(fe()<e)throw new RangeError("Invalid typed array length");return f.TYPED_ARRAY_SUPPORT?(r=new Uint8Array(e),r.__proto__=f.prototype):(r===null&&(r=new f(e)),r.length=e),r}function f(r,e,t){if(!f.TYPED_ARRAY_SUPPORT&&!(this instanceof f))return new f(r,e,t);if(typeof r=="number"){if(typeof e=="string")throw new Error("If encoding is specified then the first argument must be a string");return Be(this,r)}return ir(this,r,e,t)}f.poolSize=8192;f._augment=function(r){return r.__proto__=f.prototype,r};function ir(r,e,t,i){if(typeof e=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer?nt(r,e,t,i):typeof e=="string"?it(r,e,t):ot(r,e)}f.from=function(r,e,t){return ir(null,r,e,t)};f.TYPED_ARRAY_SUPPORT&&(f.prototype.__proto__=Uint8Array.prototype,f.__proto__=Uint8Array,typeof Symbol<"u"&&Symbol.species&&f[Symbol.species]);function nr(r){if(typeof r!="number")throw new TypeError('"size" argument must be a number');if(r<0)throw new RangeError('"size" argument must not be negative')}function tt(r,e,t,i){return nr(e),e<=0?C(r,e):t!==void 0?typeof i=="string"?C(r,e).fill(t,i):C(r,e).fill(t):C(r,e)}f.alloc=function(r,e,t){return tt(null,r,e,t)};function Be(r,e){if(nr(e),r=C(r,e<0?0:Ue(e)|0),!f.TYPED_ARRAY_SUPPORT)for(var t=0;t<e;++t)r[t]=0;return r}f.allocUnsafe=function(r){return Be(null,r)};f.allocUnsafeSlow=function(r){return Be(null,r)};function it(r,e,t){if((typeof t!="string"||t==="")&&(t="utf8"),!f.isEncoding(t))throw new TypeError('"encoding" must be a valid string encoding');var i=or(e,t)|0;r=C(r,i);var n=r.write(e,t);return n!==i&&(r=r.slice(0,n)),r}function Te(r,e){var t=e.length<0?0:Ue(e.length)|0;r=C(r,t);for(var i=0;i<t;i+=1)r[i]=e[i]&255;return r}function nt(r,e,t,i){if(e.byteLength,t<0||e.byteLength<t)throw new RangeError("'offset' is out of bounds");if(e.byteLength<t+(i||0))throw new RangeError("'length' is out of bounds");return t===void 0&&i===void 0?e=new Uint8Array(e):i===void 0?e=new Uint8Array(e,t):e=new Uint8Array(e,t,i),f.TYPED_ARRAY_SUPPORT?(r=e,r.__proto__=f.prototype):r=Te(r,e),r}function ot(r,e){if(M(e)){var t=Ue(e.length)|0;return r=C(r,t),r.length===0||e.copy(r,0,0,t),r}if(e){if(typeof ArrayBuffer<"u"&&e.buffer instanceof ArrayBuffer||"length"in e)return typeof e.length!="number"||St(e.length)?C(r,0):Te(r,e);if(e.type==="Buffer"&&tr(e.data))return Te(r,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function Ue(r){if(r>=fe())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+fe().toString(16)+" bytes");return r|0}f.isBuffer=Y;function M(r){return!!(r!=null&&r._isBuffer)}f.compare=function(e,t){if(!M(e)||!M(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var i=e.length,n=t.length,o=0,a=Math.min(i,n);o<a;++o)if(e[o]!==t[o]){i=e[o],n=t[o];break}return i<n?-1:n<i?1:0};f.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};f.concat=function(e,t){if(!tr(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return f.alloc(0);var i;if(t===void 0)for(t=0,i=0;i<e.length;++i)t+=e[i].length;var n=f.allocUnsafe(t),o=0;for(i=0;i<e.length;++i){var a=e[i];if(!M(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(n,o),o+=a.length}return n};function or(r,e){if(M(r))return r.length;if(typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(r)||r instanceof ArrayBuffer))return r.byteLength;typeof r!="string"&&(r=""+r);var t=r.length;if(t===0)return 0;for(var i=!1;;)switch(e){case"ascii":case"latin1":case"binary":return t;case"utf8":case"utf-8":case void 0:return le(r).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return t*2;case"hex":return t>>>1;case"base64":return hr(r).length;default:if(i)return le(r).length;e=(""+e).toLowerCase(),i=!0}}f.byteLength=or;function at(r,e,t){var i=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((t===void 0||t>this.length)&&(t=this.length),t<=0)||(t>>>=0,e>>>=0,t<=e))return"";for(r||(r="utf8");;)switch(r){case"hex":return wt(this,e,t);case"utf8":case"utf-8":return ur(this,e,t);case"ascii":return dt(this,e,t);case"latin1":case"binary":return gt(this,e,t);case"base64":return ht(this,e,t);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return mt(this,e,t);default:if(i)throw new TypeError("Unknown encoding: "+r);r=(r+"").toLowerCase(),i=!0}}f.prototype._isBuffer=!0;function j(r,e,t){var i=r[e];r[e]=r[t],r[t]=i}f.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)j(this,t,t+1);return this};f.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)j(this,t,t+3),j(this,t+1,t+2);return this};f.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)j(this,t,t+7),j(this,t+1,t+6),j(this,t+2,t+5),j(this,t+3,t+4);return this};f.prototype.toString=function(){var e=this.length|0;return e===0?"":arguments.length===0?ur(this,0,e):at.apply(this,arguments)};f.prototype.equals=function(e){if(!M(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:f.compare(this,e)===0};f.prototype.inspect=function(){var e="",t=rt;return this.length>0&&(e=this.toString("hex",0,t).match(/.{2}/g).join(" "),this.length>t&&(e+=" ... ")),"<Buffer "+e+">"};f.prototype.compare=function(e,t,i,n,o){if(!M(e))throw new TypeError("Argument must be a Buffer");if(t===void 0&&(t=0),i===void 0&&(i=e?e.length:0),n===void 0&&(n=0),o===void 0&&(o=this.length),t<0||i>e.length||n<0||o>this.length)throw new RangeError("out of range index");if(n>=o&&t>=i)return 0;if(n>=o)return-1;if(t>=i)return 1;if(t>>>=0,i>>>=0,n>>>=0,o>>>=0,this===e)return 0;for(var a=o-n,s=i-t,u=Math.min(a,s),c=this.slice(n,o),h=e.slice(t,i),l=0;l<u;++l)if(c[l]!==h[l]){a=c[l],s=h[l];break}return a<s?-1:s<a?1:0};function ar(r,e,t,i,n){if(r.length===0)return-1;if(typeof t=="string"?(i=t,t=0):t>2147483647?t=2147483647:t<-2147483648&&(t=-2147483648),t=+t,isNaN(t)&&(t=n?0:r.length-1),t<0&&(t=r.length+t),t>=r.length){if(n)return-1;t=r.length-1}else if(t<0)if(n)t=0;else return-1;if(typeof e=="string"&&(e=f.from(e,i)),M(e))return e.length===0?-1:je(r,e,t,i,n);if(typeof e=="number")return e=e&255,f.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?n?Uint8Array.prototype.indexOf.call(r,e,t):Uint8Array.prototype.lastIndexOf.call(r,e,t):je(r,[e],t,i,n);throw new TypeError("val must be string, number or Buffer")}function je(r,e,t,i,n){var o=1,a=r.length,s=e.length;if(i!==void 0&&(i=String(i).toLowerCase(),i==="ucs2"||i==="ucs-2"||i==="utf16le"||i==="utf-16le")){if(r.length<2||e.length<2)return-1;o=2,a/=2,s/=2,t/=2}function u(w,m){return o===1?w[m]:w.readUInt16BE(m*o)}var c;if(n){var h=-1;for(c=t;c<a;c++)if(u(r,c)===u(e,h===-1?0:c-h)){if(h===-1&&(h=c),c-h+1===s)return h*o}else h!==-1&&(c-=c-h),h=-1}else for(t+s>a&&(t=a-s),c=t;c>=0;c--){for(var l=!0,p=0;p<s;p++)if(u(r,c+p)!==u(e,p)){l=!1;break}if(l)return c}return-1}f.prototype.includes=function(e,t,i){return this.indexOf(e,t,i)!==-1};f.prototype.indexOf=function(e,t,i){return ar(this,e,t,i,!0)};f.prototype.lastIndexOf=function(e,t,i){return ar(this,e,t,i,!1)};function st(r,e,t,i){t=Number(t)||0;var n=r.length-t;i?(i=Number(i),i>n&&(i=n)):i=n;var o=e.length;if(o%2!==0)throw new TypeError("Invalid hex string");i>o/2&&(i=o/2);for(var a=0;a<i;++a){var s=parseInt(e.substr(a*2,2),16);if(isNaN(s))return a;r[t+a]=s}return a}function ut(r,e,t,i){return ge(le(e,r.length-t),r,t,i)}function sr(r,e,t,i){return ge(Et(e),r,t,i)}function ft(r,e,t,i){return sr(r,e,t,i)}function lt(r,e,t,i){return ge(hr(e),r,t,i)}function ct(r,e,t,i){return ge(Rt(e,r.length-t),r,t,i)}f.prototype.write=function(e,t,i,n){if(t===void 0)n="utf8",i=this.length,t=0;else if(i===void 0&&typeof t=="string")n=t,i=this.length,t=0;else if(isFinite(t))t=t|0,isFinite(i)?(i=i|0,n===void 0&&(n="utf8")):(n=i,i=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var o=this.length-t;if((i===void 0||i>o)&&(i=o),e.length>0&&(i<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var a=!1;;)switch(n){case"hex":return st(this,e,t,i);case"utf8":case"utf-8":return ut(this,e,t,i);case"ascii":return sr(this,e,t,i);case"latin1":case"binary":return ft(this,e,t,i);case"base64":return lt(this,e,t,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ct(this,e,t,i);default:if(a)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),a=!0}};f.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function ht(r,e,t){return e===0&&t===r.length?ke(r):ke(r.slice(e,t))}function ur(r,e,t){t=Math.min(r.length,t);for(var i=[],n=e;n<t;){var o=r[n],a=null,s=o>239?4:o>223?3:o>191?2:1;if(n+s<=t){var u,c,h,l;switch(s){case 1:o<128&&(a=o);break;case 2:u=r[n+1],(u&192)===128&&(l=(o&31)<<6|u&63,l>127&&(a=l));break;case 3:u=r[n+1],c=r[n+2],(u&192)===128&&(c&192)===128&&(l=(o&15)<<12|(u&63)<<6|c&63,l>2047&&(l<55296||l>57343)&&(a=l));break;case 4:u=r[n+1],c=r[n+2],h=r[n+3],(u&192)===128&&(c&192)===128&&(h&192)===128&&(l=(o&15)<<18|(u&63)<<12|(c&63)<<6|h&63,l>65535&&l<1114112&&(a=l))}}a===null?(a=65533,s=1):a>65535&&(a-=65536,i.push(a>>>10&1023|55296),a=56320|a&1023),i.push(a),n+=s}return pt(i)}var Ye=4096;function pt(r){var e=r.length;if(e<=Ye)return String.fromCharCode.apply(String,r);for(var t="",i=0;i<e;)t+=String.fromCharCode.apply(String,r.slice(i,i+=Ye));return t}function dt(r,e,t){var i="";t=Math.min(r.length,t);for(var n=e;n<t;++n)i+=String.fromCharCode(r[n]&127);return i}function gt(r,e,t){var i="";t=Math.min(r.length,t);for(var n=e;n<t;++n)i+=String.fromCharCode(r[n]);return i}function wt(r,e,t){var i=r.length;(!e||e<0)&&(e=0),(!t||t<0||t>i)&&(t=i);for(var n="",o=e;o<t;++o)n+=bt(r[o]);return n}function mt(r,e,t){for(var i=r.slice(e,t),n="",o=0;o<i.length;o+=2)n+=String.fromCharCode(i[o]+i[o+1]*256);return n}f.prototype.slice=function(e,t){var i=this.length;e=~~e,t=t===void 0?i:~~t,e<0?(e+=i,e<0&&(e=0)):e>i&&(e=i),t<0?(t+=i,t<0&&(t=0)):t>i&&(t=i),t<e&&(t=e);var n;if(f.TYPED_ARRAY_SUPPORT)n=this.subarray(e,t),n.__proto__=f.prototype;else{var o=t-e;n=new f(o,void 0);for(var a=0;a<o;++a)n[a]=this[a+e]}return n};function _(r,e,t){if(r%1!==0||r<0)throw new RangeError("offset is not uint");if(r+e>t)throw new RangeError("Trying to access beyond buffer length")}f.prototype.readUIntLE=function(e,t,i){e=e|0,t=t|0,i||_(e,t,this.length);for(var n=this[e],o=1,a=0;++a<t&&(o*=256);)n+=this[e+a]*o;return n};f.prototype.readUIntBE=function(e,t,i){e=e|0,t=t|0,i||_(e,t,this.length);for(var n=this[e+--t],o=1;t>0&&(o*=256);)n+=this[e+--t]*o;return n};f.prototype.readUInt8=function(e,t){return t||_(e,1,this.length),this[e]};f.prototype.readUInt16LE=function(e,t){return t||_(e,2,this.length),this[e]|this[e+1]<<8};f.prototype.readUInt16BE=function(e,t){return t||_(e,2,this.length),this[e]<<8|this[e+1]};f.prototype.readUInt32LE=function(e,t){return t||_(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216};f.prototype.readUInt32BE=function(e,t){return t||_(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])};f.prototype.readIntLE=function(e,t,i){e=e|0,t=t|0,i||_(e,t,this.length);for(var n=this[e],o=1,a=0;++a<t&&(o*=256);)n+=this[e+a]*o;return o*=128,n>=o&&(n-=Math.pow(2,8*t)),n};f.prototype.readIntBE=function(e,t,i){e=e|0,t=t|0,i||_(e,t,this.length);for(var n=t,o=1,a=this[e+--n];n>0&&(o*=256);)a+=this[e+--n]*o;return o*=128,a>=o&&(a-=Math.pow(2,8*t)),a};f.prototype.readInt8=function(e,t){return t||_(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]};f.prototype.readInt16LE=function(e,t){t||_(e,2,this.length);var i=this[e]|this[e+1]<<8;return i&32768?i|4294901760:i};f.prototype.readInt16BE=function(e,t){t||_(e,2,this.length);var i=this[e+1]|this[e]<<8;return i&32768?i|4294901760:i};f.prototype.readInt32LE=function(e,t){return t||_(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24};f.prototype.readInt32BE=function(e,t){return t||_(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]};f.prototype.readFloatLE=function(e,t){return t||_(e,4,this.length),he(this,e,!0,23,4)};f.prototype.readFloatBE=function(e,t){return t||_(e,4,this.length),he(this,e,!1,23,4)};f.prototype.readDoubleLE=function(e,t){return t||_(e,8,this.length),he(this,e,!0,52,8)};f.prototype.readDoubleBE=function(e,t){return t||_(e,8,this.length),he(this,e,!1,52,8)};function E(r,e,t,i,n,o){if(!M(r))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>n||e<o)throw new RangeError('"value" argument is out of bounds');if(t+i>r.length)throw new RangeError("Index out of range")}f.prototype.writeUIntLE=function(e,t,i,n){if(e=+e,t=t|0,i=i|0,!n){var o=Math.pow(2,8*i)-1;E(this,e,t,i,o,0)}var a=1,s=0;for(this[t]=e&255;++s<i&&(a*=256);)this[t+s]=e/a&255;return t+i};f.prototype.writeUIntBE=function(e,t,i,n){if(e=+e,t=t|0,i=i|0,!n){var o=Math.pow(2,8*i)-1;E(this,e,t,i,o,0)}var a=i-1,s=1;for(this[t+a]=e&255;--a>=0&&(s*=256);)this[t+a]=e/s&255;return t+i};f.prototype.writeUInt8=function(e,t,i){return e=+e,t=t|0,i||E(this,e,t,1,255,0),f.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=e&255,t+1};function pe(r,e,t,i){e<0&&(e=65535+e+1);for(var n=0,o=Math.min(r.length-t,2);n<o;++n)r[t+n]=(e&255<<8*(i?n:1-n))>>>(i?n:1-n)*8}f.prototype.writeUInt16LE=function(e,t,i){return e=+e,t=t|0,i||E(this,e,t,2,65535,0),f.TYPED_ARRAY_SUPPORT?(this[t]=e&255,this[t+1]=e>>>8):pe(this,e,t,!0),t+2};f.prototype.writeUInt16BE=function(e,t,i){return e=+e,t=t|0,i||E(this,e,t,2,65535,0),f.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=e&255):pe(this,e,t,!1),t+2};function de(r,e,t,i){e<0&&(e=4294967295+e+1);for(var n=0,o=Math.min(r.length-t,4);n<o;++n)r[t+n]=e>>>(i?n:3-n)*8&255}f.prototype.writeUInt32LE=function(e,t,i){return e=+e,t=t|0,i||E(this,e,t,4,4294967295,0),f.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=e&255):de(this,e,t,!0),t+4};f.prototype.writeUInt32BE=function(e,t,i){return e=+e,t=t|0,i||E(this,e,t,4,4294967295,0),f.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255):de(this,e,t,!1),t+4};f.prototype.writeIntLE=function(e,t,i,n){if(e=+e,t=t|0,!n){var o=Math.pow(2,8*i-1);E(this,e,t,i,o-1,-o)}var a=0,s=1,u=0;for(this[t]=e&255;++a<i&&(s*=256);)e<0&&u===0&&this[t+a-1]!==0&&(u=1),this[t+a]=(e/s>>0)-u&255;return t+i};f.prototype.writeIntBE=function(e,t,i,n){if(e=+e,t=t|0,!n){var o=Math.pow(2,8*i-1);E(this,e,t,i,o-1,-o)}var a=i-1,s=1,u=0;for(this[t+a]=e&255;--a>=0&&(s*=256);)e<0&&u===0&&this[t+a+1]!==0&&(u=1),this[t+a]=(e/s>>0)-u&255;return t+i};f.prototype.writeInt8=function(e,t,i){return e=+e,t=t|0,i||E(this,e,t,1,127,-128),f.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=e&255,t+1};f.prototype.writeInt16LE=function(e,t,i){return e=+e,t=t|0,i||E(this,e,t,2,32767,-32768),f.TYPED_ARRAY_SUPPORT?(this[t]=e&255,this[t+1]=e>>>8):pe(this,e,t,!0),t+2};f.prototype.writeInt16BE=function(e,t,i){return e=+e,t=t|0,i||E(this,e,t,2,32767,-32768),f.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=e&255):pe(this,e,t,!1),t+2};f.prototype.writeInt32LE=function(e,t,i){return e=+e,t=t|0,i||E(this,e,t,4,2147483647,-2147483648),f.TYPED_ARRAY_SUPPORT?(this[t]=e&255,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):de(this,e,t,!0),t+4};f.prototype.writeInt32BE=function(e,t,i){return e=+e,t=t|0,i||E(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),f.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255):de(this,e,t,!1),t+4};function fr(r,e,t,i,n,o){if(t+i>r.length)throw new RangeError("Index out of range");if(t<0)throw new RangeError("Index out of range")}function lr(r,e,t,i,n){return n||fr(r,e,t,4),rr(r,e,t,i,23,4),t+4}f.prototype.writeFloatLE=function(e,t,i){return lr(this,e,t,!0,i)};f.prototype.writeFloatBE=function(e,t,i){return lr(this,e,t,!1,i)};function cr(r,e,t,i,n){return n||fr(r,e,t,8),rr(r,e,t,i,52,8),t+8}f.prototype.writeDoubleLE=function(e,t,i){return cr(this,e,t,!0,i)};f.prototype.writeDoubleBE=function(e,t,i){return cr(this,e,t,!1,i)};f.prototype.copy=function(e,t,i,n){if(i||(i=0),!n&&n!==0&&(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<i&&(n=i),n===i||e.length===0||this.length===0)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-i&&(n=e.length-t+i);var o=n-i,a;if(this===e&&i<t&&t<n)for(a=o-1;a>=0;--a)e[a+t]=this[a+i];else if(o<1e3||!f.TYPED_ARRAY_SUPPORT)for(a=0;a<o;++a)e[a+t]=this[a+i];else Uint8Array.prototype.set.call(e,this.subarray(i,i+o),t);return o};f.prototype.fill=function(e,t,i,n){if(typeof e=="string"){if(typeof t=="string"?(n=t,t=0,i=this.length):typeof i=="string"&&(n=i,i=this.length),e.length===1){var o=e.charCodeAt(0);o<256&&(e=o)}if(n!==void 0&&typeof n!="string")throw new TypeError("encoding must be a string");if(typeof n=="string"&&!f.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else typeof e=="number"&&(e=e&255);if(t<0||this.length<t||this.length<i)throw new RangeError("Out of range index");if(i<=t)return this;t=t>>>0,i=i===void 0?this.length:i>>>0,e||(e=0);var a;if(typeof e=="number")for(a=t;a<i;++a)this[a]=e;else{var s=M(e)?e:le(new f(e,n).toString()),u=s.length;for(a=0;a<i-t;++a)this[a+t]=s[a%u]}return this};var vt=/[^+\/0-9A-Za-z-_]/g;function yt(r){if(r=_t(r).replace(vt,""),r.length<2)return"";for(;r.length%4!==0;)r=r+"=";return r}function _t(r){return r.trim?r.trim():r.replace(/^\s+|\s+$/g,"")}function bt(r){return r<16?"0"+r.toString(16):r.toString(16)}function le(r,e){e=e||1/0;for(var t,i=r.length,n=null,o=[],a=0;a<i;++a){if(t=r.charCodeAt(a),t>55295&&t<57344){if(!n){if(t>56319){(e-=3)>-1&&o.push(239,191,189);continue}else if(a+1===i){(e-=3)>-1&&o.push(239,191,189);continue}n=t;continue}if(t<56320){(e-=3)>-1&&o.push(239,191,189),n=t;continue}t=(n-55296<<10|t-56320)+65536}else n&&(e-=3)>-1&&o.push(239,191,189);if(n=null,t<128){if((e-=1)<0)break;o.push(t)}else if(t<2048){if((e-=2)<0)break;o.push(t>>6|192,t&63|128)}else if(t<65536){if((e-=3)<0)break;o.push(t>>12|224,t>>6&63|128,t&63|128)}else if(t<1114112){if((e-=4)<0)break;o.push(t>>18|240,t>>12&63|128,t>>6&63|128,t&63|128)}else throw new Error("Invalid code point")}return o}function Et(r){for(var e=[],t=0;t<r.length;++t)e.push(r.charCodeAt(t)&255);return e}function Rt(r,e){for(var t,i,n,o=[],a=0;a<r.length&&!((e-=2)<0);++a)t=r.charCodeAt(a),i=t>>8,n=t%256,o.push(n),o.push(i);return o}function hr(r){return Zr(yt(r))}function ge(r,e,t,i){for(var n=0;n<i&&!(n+t>=e.length||n>=r.length);++n)e[n+t]=r[n];return n}function St(r){return r!==r}function Y(r){return r!=null&&(!!r._isBuffer||pr(r)||At(r))}function pr(r){return!!r.constructor&&typeof r.constructor.isBuffer=="function"&&r.constructor.isBuffer(r)}function At(r){return typeof r.readFloatLE=="function"&&typeof r.slice=="function"&&pr(r.slice(0,0))}function dr(){throw new Error("setTimeout has not been defined")}function gr(){throw new Error("clearTimeout has not been defined")}var x=dr,D=gr;typeof G.setTimeout=="function"&&(x=setTimeout);typeof G.clearTimeout=="function"&&(D=clearTimeout);function wr(r){if(x===setTimeout)return setTimeout(r,0);if((x===dr||!x)&&setTimeout)return x=setTimeout,setTimeout(r,0);try{return x(r,0)}catch{try{return x.call(null,r,0)}catch{return x.call(this,r,0)}}}function Tt(r){if(D===clearTimeout)return clearTimeout(r);if((D===gr||!D)&&clearTimeout)return D=clearTimeout,clearTimeout(r);try{return D(r)}catch{try{return D.call(null,r)}catch{return D.call(this,r)}}}var B=[],H=!1,W,se=-1;function It(){!H||!W||(H=!1,W.length?B=W.concat(B):se=-1,B.length&&mr())}function mr(){if(!H){var r=wr(It);H=!0;for(var e=B.length;e;){for(W=B,B=[];++se<e;)W&&W[se].run();se=-1,e=B.length}W=null,H=!1,Tt(r)}}function R(r){var e=new Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)e[t-1]=arguments[t];B.push(new vr(r,e)),B.length===1&&!H&&wr(mr)}function vr(r,e){this.fun=r,this.array=e}vr.prototype.run=function(){this.fun.apply(null,this.array)};var Lt="browser",Mt="browser",Ct=!0,Bt={},Ut=[],Ot="",xt={},Dt={},Pt={};function $(){}var Nt=$,qt=$,kt=$,jt=$,Yt=$,Wt=$,Ft=$;function $t(r){throw new Error("process.binding is not supported")}function zt(){return"/"}function Jt(r){throw new Error("process.chdir is not supported")}function Vt(){return 0}var V=G.performance||{},Ht=V.now||V.mozNow||V.msNow||V.oNow||V.webkitNow||function(){return new Date().getTime()};function Gt(r){var e=Ht.call(V)*.001,t=Math.floor(e),i=Math.floor(e%1*1e9);return r&&(t=t-r[0],i=i-r[1],i<0&&(t--,i+=1e9)),[t,i]}var Qt=new Date;function Zt(){var r=new Date,e=r-Qt;return e/1e3}var ue={nextTick:R,title:Lt,browser:Ct,env:Bt,argv:Ut,version:Ot,versions:xt,on:Nt,addListener:qt,once:kt,off:jt,removeListener:Yt,removeAllListeners:Wt,emit:Ft,binding:$t,cwd:zt,chdir:Jt,umask:Vt,hrtime:Gt,platform:Mt,release:Dt,config:Pt,uptime:Zt},Ie;typeof Object.create=="function"?Ie=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:Ie=function(e,t){e.super_=t;var i=function(){};i.prototype=t.prototype,e.prototype=new i,e.prototype.constructor=e};var Q=Ie,Kt=/%[sdj%]/g;function Xt(r){if(!xe(r)){for(var e=[],t=0;t<arguments.length;t++)e.push(q(arguments[t]));return e.join(" ")}for(var t=1,i=arguments,n=i.length,o=String(r).replace(Kt,function(s){if(s==="%%")return"%";if(t>=n)return s;switch(s){case"%s":return String(i[t++]);case"%d":return Number(i[t++]);case"%j":try{return JSON.stringify(i[t++])}catch{return"[Circular]"}default:return s}}),a=i[t];t<n;a=i[++t])Oe(a)||!re(a)?o+=" "+a:o+=" "+q(a);return o}function yr(r,e){if(P(G.process))return function(){return yr(r,e).apply(this,arguments)};if(ue.noDeprecation===!0)return r;var t=!1;function i(){if(!t){if(ue.throwDeprecation)throw new Error(e);ue.traceDeprecation?console.trace(e):console.error(e),t=!0}return r.apply(this,arguments)}return i}var ae={},ve;function ei(r){if(P(ve)&&(ve=ue.env.NODE_DEBUG||""),r=r.toUpperCase(),!ae[r])if(new RegExp("\\b"+r+"\\b","i").test(ve)){var e=0;ae[r]=function(){var t=Xt.apply(null,arguments);console.error("%s %d: %s",r,e,t)}}else ae[r]=function(){};return ae[r]}function q(r,e){var t={seen:[],stylize:ti};return arguments.length>=3&&(t.depth=arguments[2]),arguments.length>=4&&(t.colors=arguments[3]),_r(e)?t.showHidden=e:e&&fi(t,e),P(t.showHidden)&&(t.showHidden=!1),P(t.depth)&&(t.depth=2),P(t.colors)&&(t.colors=!1),P(t.customInspect)&&(t.customInspect=!0),t.colors&&(t.stylize=ri),ce(t,r,t.depth)}q.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};q.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function ri(r,e){var t=q.styles[e];return t?"\x1B["+q.colors[t][0]+"m"+r+"\x1B["+q.colors[t][1]+"m":r}function ti(r,e){return r}function ii(r){var e={};return r.forEach(function(t,i){e[t]=!0}),e}function ce(r,e,t){if(r.customInspect&&e&&Ee(e.inspect)&&e.inspect!==q&&!(e.constructor&&e.constructor.prototype===e)){var i=e.inspect(t,r);return xe(i)||(i=ce(r,i,t)),i}var n=ni(r,e);if(n)return n;var o=Object.keys(e),a=ii(o);if(r.showHidden&&(o=Object.getOwnPropertyNames(e)),be(e)&&(o.indexOf("message")>=0||o.indexOf("description")>=0))return ye(e);if(o.length===0){if(Ee(e)){var s=e.name?": "+e.name:"";return r.stylize("[Function"+s+"]","special")}if(_e(e))return r.stylize(RegExp.prototype.toString.call(e),"regexp");if(We(e))return r.stylize(Date.prototype.toString.call(e),"date");if(be(e))return ye(e)}var u="",c=!1,h=["{","}"];if(si(e)&&(c=!0,h=["[","]"]),Ee(e)){var l=e.name?": "+e.name:"";u=" [Function"+l+"]"}if(_e(e)&&(u=" "+RegExp.prototype.toString.call(e)),We(e)&&(u=" "+Date.prototype.toUTCString.call(e)),be(e)&&(u=" "+ye(e)),o.length===0&&(!c||e.length==0))return h[0]+u+h[1];if(t<0)return _e(e)?r.stylize(RegExp.prototype.toString.call(e),"regexp"):r.stylize("[Object]","special");r.seen.push(e);var p;return c?p=oi(r,e,t,a,o):p=o.map(function(w){return Le(r,e,t,a,w,c)}),r.seen.pop(),ai(p,u,h)}function ni(r,e){if(P(e))return r.stylize("undefined","undefined");if(xe(e)){var t="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return r.stylize(t,"string")}if(ui(e))return r.stylize(""+e,"number");if(_r(e))return r.stylize(""+e,"boolean");if(Oe(e))return r.stylize("null","null")}function ye(r){return"["+Error.prototype.toString.call(r)+"]"}function oi(r,e,t,i,n){for(var o=[],a=0,s=e.length;a<s;++a)br(e,String(a))?o.push(Le(r,e,t,i,String(a),!0)):o.push("");return n.forEach(function(u){u.match(/^\d+$/)||o.push(Le(r,e,t,i,u,!0))}),o}function Le(r,e,t,i,n,o){var a,s,u;if(u=Object.getOwnPropertyDescriptor(e,n)||{value:e[n]},u.get?u.set?s=r.stylize("[Getter/Setter]","special"):s=r.stylize("[Getter]","special"):u.set&&(s=r.stylize("[Setter]","special")),br(i,n)||(a="["+n+"]"),s||(r.seen.indexOf(u.value)<0?(Oe(t)?s=ce(r,u.value,null):s=ce(r,u.value,t-1),s.indexOf(`
`)>-1&&(o?s=s.split(`
`).map(function(c){return"  "+c}).join(`
`).substr(2):s=`
`+s.split(`
`).map(function(c){return"   "+c}).join(`
`))):s=r.stylize("[Circular]","special")),P(a)){if(o&&n.match(/^\d+$/))return s;a=JSON.stringify(""+n),a.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=r.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=r.stylize(a,"string"))}return a+": "+s}function ai(r,e,t){var i=r.reduce(function(n,o){return o.indexOf(`
`)>=0,n+o.replace(/\u001b\[\d\d?m/g,"").length+1},0);return i>60?t[0]+(e===""?"":e+`
 `)+" "+r.join(`,
  `)+" "+t[1]:t[0]+e+" "+r.join(", ")+" "+t[1]}function si(r){return Array.isArray(r)}function _r(r){return typeof r=="boolean"}function Oe(r){return r===null}function ui(r){return typeof r=="number"}function xe(r){return typeof r=="string"}function P(r){return r===void 0}function _e(r){return re(r)&&De(r)==="[object RegExp]"}function re(r){return typeof r=="object"&&r!==null}function We(r){return re(r)&&De(r)==="[object Date]"}function be(r){return re(r)&&(De(r)==="[object Error]"||r instanceof Error)}function Ee(r){return typeof r=="function"}function De(r){return Object.prototype.toString.call(r)}function fi(r,e){if(!e||!re(e))return r;for(var t=Object.keys(e),i=t.length;i--;)r[t[i]]=e[t[i]];return r}function br(r,e){return Object.prototype.hasOwnProperty.call(r,e)}function z(){this.head=null,this.tail=null,this.length=0}z.prototype.push=function(r){var e={data:r,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length};z.prototype.unshift=function(r){var e={data:r,next:this.head};this.length===0&&(this.tail=e),this.head=e,++this.length};z.prototype.shift=function(){if(this.length!==0){var r=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,r}};z.prototype.clear=function(){this.head=this.tail=null,this.length=0};z.prototype.join=function(r){if(this.length===0)return"";for(var e=this.head,t=""+e.data;e=e.next;)t+=r+e.data;return t};z.prototype.concat=function(r){if(this.length===0)return f.alloc(0);if(this.length===1)return this.head.data;for(var e=f.allocUnsafe(r>>>0),t=this.head,i=0;t;)t.data.copy(e,i),i+=t.data.length,t=t.next;return e};var li=f.isEncoding||function(r){switch(r&&r.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function ci(r){if(r&&!li(r))throw new Error("Unknown encoding: "+r)}function te(r){switch(this.encoding=(r||"utf8").toLowerCase().replace(/[-_]/,""),ci(r),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=pi;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=di;break;default:this.write=hi;return}this.charBuffer=new f(6),this.charReceived=0,this.charLength=0}te.prototype.write=function(r){for(var e="";this.charLength;){var t=r.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:r.length;if(r.copy(this.charBuffer,this.charReceived,0,t),this.charReceived+=t,this.charReceived<this.charLength)return"";r=r.slice(t,r.length),e=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var n=e.charCodeAt(e.length-1);if(n>=55296&&n<=56319){this.charLength+=this.surrogateSize,e="";continue}if(this.charReceived=this.charLength=0,r.length===0)return e;break}this.detectIncompleteChar(r);var i=r.length;this.charLength&&(r.copy(this.charBuffer,0,r.length-this.charReceived,i),i-=this.charReceived),e+=r.toString(this.encoding,0,i);var i=e.length-1,n=e.charCodeAt(i);if(n>=55296&&n<=56319){var o=this.surrogateSize;return this.charLength+=o,this.charReceived+=o,this.charBuffer.copy(this.charBuffer,o,0,o),r.copy(this.charBuffer,0,0,o),e.substring(0,i)}return e};te.prototype.detectIncompleteChar=function(r){for(var e=r.length>=3?3:r.length;e>0;e--){var t=r[r.length-e];if(e==1&&t>>5==6){this.charLength=2;break}if(e<=2&&t>>4==14){this.charLength=3;break}if(e<=3&&t>>3==30){this.charLength=4;break}}this.charReceived=e};te.prototype.end=function(r){var e="";if(r&&r.length&&(e=this.write(r)),this.charReceived){var t=this.charReceived,i=this.charBuffer,n=this.encoding;e+=i.slice(0,t).toString(n)}return e};function hi(r){return r.toString(this.encoding)}function pi(r){this.charReceived=r.length%2,this.charLength=this.charReceived?2:0}function di(r){this.charReceived=r.length%3,this.charLength=this.charReceived?3:0}v.ReadableState=Er;var g=ei("stream");Q(v,d);function gi(r,e,t){if(typeof r.prependListener=="function")return r.prependListener(e,t);!r._events||!r._events[e]?r.on(e,t):Array.isArray(r._events[e])?r._events[e].unshift(t):r._events[e]=[t,r._events[e]]}function wi(r,e){return r.listeners(e).length}function Er(r,e){r=r||{},this.objectMode=!!r.objectMode,e instanceof A&&(this.objectMode=this.objectMode||!!r.readableObjectMode);var t=r.highWaterMark,i=this.objectMode?16:16*1024;this.highWaterMark=t||t===0?t:i,this.highWaterMark=~~this.highWaterMark,this.buffer=new z,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.defaultEncoding=r.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,r.encoding&&(this.decoder=new te(r.encoding),this.encoding=r.encoding)}function v(r){if(!(this instanceof v))return new v(r);this._readableState=new Er(r,this),this.readable=!0,r&&typeof r.read=="function"&&(this._read=r.read),d.call(this)}v.prototype.push=function(r,e){var t=this._readableState;return!t.objectMode&&typeof r=="string"&&(e=e||t.defaultEncoding,e!==t.encoding&&(r=f.from(r,e),e="")),Rr(this,t,r,e,!1)};v.prototype.unshift=function(r){var e=this._readableState;return Rr(this,e,r,"",!0)};v.prototype.isPaused=function(){return this._readableState.flowing===!1};function Rr(r,e,t,i,n){var o=yi(e,t);if(o)r.emit("error",o);else if(t===null)e.reading=!1,_i(r,e);else if(e.objectMode||t&&t.length>0)if(e.ended&&!n){var a=new Error("stream.push() after EOF");r.emit("error",a)}else if(e.endEmitted&&n){var s=new Error("stream.unshift() after end event");r.emit("error",s)}else{var u;e.decoder&&!n&&!i&&(t=e.decoder.write(t),u=!e.objectMode&&t.length===0),n||(e.reading=!1),u||(e.flowing&&e.length===0&&!e.sync?(r.emit("data",t),r.read(0)):(e.length+=e.objectMode?1:t.length,n?e.buffer.unshift(t):e.buffer.push(t),e.needReadable&&we(r))),bi(r,e)}else n||(e.reading=!1);return mi(e)}function mi(r){return!r.ended&&(r.needReadable||r.length<r.highWaterMark||r.length===0)}v.prototype.setEncoding=function(r){return this._readableState.decoder=new te(r),this._readableState.encoding=r,this};var Fe=8388608;function vi(r){return r>=Fe?r=Fe:(r--,r|=r>>>1,r|=r>>>2,r|=r>>>4,r|=r>>>8,r|=r>>>16,r++),r}function $e(r,e){return r<=0||e.length===0&&e.ended?0:e.objectMode?1:r!==r?e.flowing&&e.length?e.buffer.head.data.length:e.length:(r>e.highWaterMark&&(e.highWaterMark=vi(r)),r<=e.length?r:e.ended?e.length:(e.needReadable=!0,0))}v.prototype.read=function(r){g("read",r),r=parseInt(r,10);var e=this._readableState,t=r;if(r!==0&&(e.emittedReadable=!1),r===0&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return g("read: emitReadable",e.length,e.ended),e.length===0&&e.ended?Re(this):we(this),null;if(r=$e(r,e),r===0&&e.ended)return e.length===0&&Re(this),null;var i=e.needReadable;g("need readable",i),(e.length===0||e.length-r<e.highWaterMark)&&(i=!0,g("length less than watermark",i)),e.ended||e.reading?(i=!1,g("reading or ended",i)):i&&(g("do read"),e.reading=!0,e.sync=!0,e.length===0&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(r=$e(t,e)));var n;return r>0?n=Sr(r,e):n=null,n===null?(e.needReadable=!0,r=0):e.length-=r,e.length===0&&(e.ended||(e.needReadable=!0),t!==r&&e.ended&&Re(this)),n!==null&&this.emit("data",n),n};function yi(r,e){var t=null;return!Y(e)&&typeof e!="string"&&e!==null&&e!==void 0&&!r.objectMode&&(t=new TypeError("Invalid non-string/buffer chunk")),t}function _i(r,e){if(!e.ended){if(e.decoder){var t=e.decoder.end();t&&t.length&&(e.buffer.push(t),e.length+=e.objectMode?1:t.length)}e.ended=!0,we(r)}}function we(r){var e=r._readableState;e.needReadable=!1,e.emittedReadable||(g("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?R(ze,r):ze(r))}function ze(r){g("emit readable"),r.emit("readable"),Pe(r)}function bi(r,e){e.readingMore||(e.readingMore=!0,R(Ei,r,e))}function Ei(r,e){for(var t=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(g("maybeReadMore read 0"),r.read(0),t!==e.length);)t=e.length;e.readingMore=!1}v.prototype._read=function(r){this.emit("error",new Error("not implemented"))};v.prototype.pipe=function(r,e){var t=this,i=this._readableState;switch(i.pipesCount){case 0:i.pipes=r;break;case 1:i.pipes=[i.pipes,r];break;default:i.pipes.push(r);break}i.pipesCount+=1,g("pipe count=%d opts=%j",i.pipesCount,e);var n=!e||e.end!==!1,o=n?s:h;i.endEmitted?R(o):t.once("end",o),r.on("unpipe",a);function a(T){g("onunpipe"),T===t&&h()}function s(){g("onend"),r.end()}var u=Ri(t);r.on("drain",u);var c=!1;function h(){g("cleanup"),r.removeListener("close",m),r.removeListener("finish",y),r.removeListener("drain",u),r.removeListener("error",w),r.removeListener("unpipe",a),t.removeListener("end",s),t.removeListener("end",h),t.removeListener("data",p),c=!0,i.awaitDrain&&(!r._writableState||r._writableState.needDrain)&&u()}var l=!1;t.on("data",p);function p(T){g("ondata"),l=!1;var Z=r.write(T);Z===!1&&!l&&((i.pipesCount===1&&i.pipes===r||i.pipesCount>1&&Ar(i.pipes,r)!==-1)&&!c&&(g("false write response, pause",t._readableState.awaitDrain),t._readableState.awaitDrain++,l=!0),t.pause())}function w(T){g("onerror",T),O(),r.removeListener("error",w),wi(r,"error")===0&&r.emit("error",T)}gi(r,"error",w);function m(){r.removeListener("finish",y),O()}r.once("close",m);function y(){g("onfinish"),r.removeListener("close",m),O()}r.once("finish",y);function O(){g("unpipe"),t.unpipe(r)}return r.emit("pipe",t),i.flowing||(g("pipe resume"),t.resume()),r};function Ri(r){return function(){var e=r._readableState;g("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,e.awaitDrain===0&&r.listeners("data").length&&(e.flowing=!0,Pe(r))}}v.prototype.unpipe=function(r){var e=this._readableState;if(e.pipesCount===0)return this;if(e.pipesCount===1)return r&&r!==e.pipes?this:(r||(r=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,r&&r.emit("unpipe",this),this);if(!r){var t=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var n=0;n<i;n++)t[n].emit("unpipe",this);return this}var o=Ar(e.pipes,r);return o===-1?this:(e.pipes.splice(o,1),e.pipesCount-=1,e.pipesCount===1&&(e.pipes=e.pipes[0]),r.emit("unpipe",this),this)};v.prototype.on=function(r,e){var t=d.prototype.on.call(this,r,e);if(r==="data")this._readableState.flowing!==!1&&this.resume();else if(r==="readable"){var i=this._readableState;!i.endEmitted&&!i.readableListening&&(i.readableListening=i.needReadable=!0,i.emittedReadable=!1,i.reading?i.length&&we(this):R(Si,this))}return t};v.prototype.addListener=v.prototype.on;function Si(r){g("readable nexttick read 0"),r.read(0)}v.prototype.resume=function(){var r=this._readableState;return r.flowing||(g("resume"),r.flowing=!0,Ai(this,r)),this};function Ai(r,e){e.resumeScheduled||(e.resumeScheduled=!0,R(Ti,r,e))}function Ti(r,e){e.reading||(g("resume read 0"),r.read(0)),e.resumeScheduled=!1,e.awaitDrain=0,r.emit("resume"),Pe(r),e.flowing&&!e.reading&&r.read(0)}v.prototype.pause=function(){return g("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(g("pause"),this._readableState.flowing=!1,this.emit("pause")),this};function Pe(r){var e=r._readableState;for(g("flow",e.flowing);e.flowing&&r.read()!==null;);}v.prototype.wrap=function(r){var e=this._readableState,t=!1,i=this;r.on("end",function(){if(g("wrapped end"),e.decoder&&!e.ended){var a=e.decoder.end();a&&a.length&&i.push(a)}i.push(null)}),r.on("data",function(a){if(g("wrapped data"),e.decoder&&(a=e.decoder.write(a)),!(e.objectMode&&a==null)&&!(!e.objectMode&&(!a||!a.length))){var s=i.push(a);s||(t=!0,r.pause())}});for(var n in r)this[n]===void 0&&typeof r[n]=="function"&&(this[n]=function(a){return function(){return r[a].apply(r,arguments)}}(n));var o=["error","close","destroy","pause","resume"];return Bi(o,function(a){r.on(a,i.emit.bind(i,a))}),i._read=function(a){g("wrapped _read",a),t&&(t=!1,r.resume())},i};v._fromList=Sr;function Sr(r,e){if(e.length===0)return null;var t;return e.objectMode?t=e.buffer.shift():!r||r>=e.length?(e.decoder?t=e.buffer.join(""):e.buffer.length===1?t=e.buffer.head.data:t=e.buffer.concat(e.length),e.buffer.clear()):t=Ii(r,e.buffer,e.decoder),t}function Ii(r,e,t){var i;return r<e.head.data.length?(i=e.head.data.slice(0,r),e.head.data=e.head.data.slice(r)):r===e.head.data.length?i=e.shift():i=t?Li(r,e):Mi(r,e),i}function Li(r,e){var t=e.head,i=1,n=t.data;for(r-=n.length;t=t.next;){var o=t.data,a=r>o.length?o.length:r;if(a===o.length?n+=o:n+=o.slice(0,r),r-=a,r===0){a===o.length?(++i,t.next?e.head=t.next:e.head=e.tail=null):(e.head=t,t.data=o.slice(a));break}++i}return e.length-=i,n}function Mi(r,e){var t=f.allocUnsafe(r),i=e.head,n=1;for(i.data.copy(t),r-=i.data.length;i=i.next;){var o=i.data,a=r>o.length?o.length:r;if(o.copy(t,t.length-r,0,a),r-=a,r===0){a===o.length?(++n,i.next?e.head=i.next:e.head=e.tail=null):(e.head=i,i.data=o.slice(a));break}++n}return e.length-=n,t}function Re(r){var e=r._readableState;if(e.length>0)throw new Error('"endReadable()" called on non-empty stream');e.endEmitted||(e.ended=!0,R(Ci,e,r))}function Ci(r,e){!r.endEmitted&&r.length===0&&(r.endEmitted=!0,e.readable=!1,e.emit("end"))}function Bi(r,e){for(var t=0,i=r.length;t<i;t++)e(r[t],t)}function Ar(r,e){for(var t=0,i=r.length;t<i;t++)if(r[t]===e)return t;return-1}b.WritableState=Ne;Q(b,d);function Ui(){}function Oi(r,e,t){this.chunk=r,this.encoding=e,this.callback=t,this.next=null}function Ne(r,e){Object.defineProperty(this,"buffer",{get:yr(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.")}),r=r||{},this.objectMode=!!r.objectMode,e instanceof A&&(this.objectMode=this.objectMode||!!r.writableObjectMode);var t=r.highWaterMark,i=this.objectMode?16:16*1024;this.highWaterMark=t||t===0?t:i,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var n=r.decodeStrings===!1;this.decodeStrings=!n,this.defaultEncoding=r.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(o){ji(e,o)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new Mr(this)}Ne.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t};function b(r){if(!(this instanceof b)&&!(this instanceof A))return new b(r);this._writableState=new Ne(r,this),this.writable=!0,r&&(typeof r.write=="function"&&(this._write=r.write),typeof r.writev=="function"&&(this._writev=r.writev)),d.call(this)}b.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))};function xi(r,e){var t=new Error("write after end");r.emit("error",t),R(e,t)}function Di(r,e,t,i){var n=!0,o=!1;return t===null?o=new TypeError("May not write null values to stream"):!f.isBuffer(t)&&typeof t!="string"&&t!==void 0&&!e.objectMode&&(o=new TypeError("Invalid non-string/buffer chunk")),o&&(r.emit("error",o),R(i,o),n=!1),n}b.prototype.write=function(r,e,t){var i=this._writableState,n=!1;return typeof e=="function"&&(t=e,e=null),f.isBuffer(r)?e="buffer":e||(e=i.defaultEncoding),typeof t!="function"&&(t=Ui),i.ended?xi(this,t):Di(this,i,r,t)&&(i.pendingcb++,n=Ni(this,i,r,e,t)),n};b.prototype.cork=function(){var r=this._writableState;r.corked++};b.prototype.uncork=function(){var r=this._writableState;r.corked&&(r.corked--,!r.writing&&!r.corked&&!r.finished&&!r.bufferProcessing&&r.bufferedRequest&&Tr(this,r))};b.prototype.setDefaultEncoding=function(e){if(typeof e=="string"&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this};function Pi(r,e,t){return!r.objectMode&&r.decodeStrings!==!1&&typeof e=="string"&&(e=f.from(e,t)),e}function Ni(r,e,t,i,n){t=Pi(e,t,i),f.isBuffer(t)&&(i="buffer");var o=e.objectMode?1:t.length;e.length+=o;var a=e.length<e.highWaterMark;if(a||(e.needDrain=!0),e.writing||e.corked){var s=e.lastBufferedRequest;e.lastBufferedRequest=new Oi(t,i,n),s?s.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else Me(r,e,!1,o,t,i,n);return a}function Me(r,e,t,i,n,o,a){e.writelen=i,e.writecb=a,e.writing=!0,e.sync=!0,t?r._writev(n,e.onwrite):r._write(n,o,e.onwrite),e.sync=!1}function qi(r,e,t,i,n){--e.pendingcb,t?R(n,i):n(i),r._writableState.errorEmitted=!0,r.emit("error",i)}function ki(r){r.writing=!1,r.writecb=null,r.length-=r.writelen,r.writelen=0}function ji(r,e){var t=r._writableState,i=t.sync,n=t.writecb;if(ki(t),e)qi(r,t,i,e,n);else{var o=Ir(t);!o&&!t.corked&&!t.bufferProcessing&&t.bufferedRequest&&Tr(r,t),i?R(Je,r,t,o,n):Je(r,t,o,n)}}function Je(r,e,t,i){t||Yi(r,e),e.pendingcb--,i(),Lr(r,e)}function Yi(r,e){e.length===0&&e.needDrain&&(e.needDrain=!1,r.emit("drain"))}function Tr(r,e){e.bufferProcessing=!0;var t=e.bufferedRequest;if(r._writev&&t&&t.next){var i=e.bufferedRequestCount,n=new Array(i),o=e.corkedRequestsFree;o.entry=t;for(var a=0;t;)n[a]=t,t=t.next,a+=1;Me(r,e,!0,e.length,n,"",o.finish),e.pendingcb++,e.lastBufferedRequest=null,o.next?(e.corkedRequestsFree=o.next,o.next=null):e.corkedRequestsFree=new Mr(e)}else{for(;t;){var s=t.chunk,u=t.encoding,c=t.callback,h=e.objectMode?1:s.length;if(Me(r,e,!1,h,s,u,c),t=t.next,e.writing)break}t===null&&(e.lastBufferedRequest=null)}e.bufferedRequestCount=0,e.bufferedRequest=t,e.bufferProcessing=!1}b.prototype._write=function(r,e,t){t(new Error("not implemented"))};b.prototype._writev=null;b.prototype.end=function(r,e,t){var i=this._writableState;typeof r=="function"?(t=r,r=null,e=null):typeof e=="function"&&(t=e,e=null),r!=null&&this.write(r,e),i.corked&&(i.corked=1,this.uncork()),!i.ending&&!i.finished&&Wi(this,i,t)};function Ir(r){return r.ending&&r.length===0&&r.bufferedRequest===null&&!r.finished&&!r.writing}function Ve(r,e){e.prefinished||(e.prefinished=!0,r.emit("prefinish"))}function Lr(r,e){var t=Ir(e);return t&&(e.pendingcb===0?(Ve(r,e),e.finished=!0,r.emit("finish")):Ve(r,e)),t}function Wi(r,e,t){e.ending=!0,Lr(r,e),t&&(e.finished?R(t):r.once("finish",t)),e.ended=!0,r.writable=!1}function Mr(r){var e=this;this.next=null,this.entry=null,this.finish=function(t){var i=e.entry;for(e.entry=null;i;){var n=i.callback;r.pendingcb--,n(t),i=i.next}r.corkedRequestsFree?r.corkedRequestsFree.next=e:r.corkedRequestsFree=e}}Q(A,v);var He=Object.keys(b.prototype);for(var Se=0;Se<He.length;Se++){var Ae=He[Se];A.prototype[Ae]||(A.prototype[Ae]=b.prototype[Ae])}function A(r){if(!(this instanceof A))return new A(r);v.call(this,r),b.call(this,r),r&&r.readable===!1&&(this.readable=!1),r&&r.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,r&&r.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",Fi)}function Fi(){this.allowHalfOpen||this._writableState.ended||R($i,this)}function $i(r){r.end()}Q(I,A);function zi(r){this.afterTransform=function(e,t){return Ji(r,e,t)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function Ji(r,e,t){var i=r._transformState;i.transforming=!1;var n=i.writecb;if(!n)return r.emit("error",new Error("no writecb in Transform class"));i.writechunk=null,i.writecb=null,t!=null&&r.push(t),n(e);var o=r._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&r._read(o.highWaterMark)}function I(r){if(!(this instanceof I))return new I(r);A.call(this,r),this._transformState=new zi(this);var e=this;this._readableState.needReadable=!0,this._readableState.sync=!1,r&&(typeof r.transform=="function"&&(this._transform=r.transform),typeof r.flush=="function"&&(this._flush=r.flush)),this.once("prefinish",function(){typeof this._flush=="function"?this._flush(function(t){Ge(e,t)}):Ge(e)})}I.prototype.push=function(r,e){return this._transformState.needTransform=!1,A.prototype.push.call(this,r,e)};I.prototype._transform=function(r,e,t){throw new Error("Not implemented")};I.prototype._write=function(r,e,t){var i=this._transformState;if(i.writecb=t,i.writechunk=r,i.writeencoding=e,!i.transforming){var n=this._readableState;(i.needTransform||n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark)}};I.prototype._read=function(r){var e=this._transformState;e.writechunk!==null&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0};function Ge(r,e){if(e)return r.emit("error",e);var t=r._writableState,i=r._transformState;if(t.length)throw new Error("Calling transform done when ws.length != 0");if(i.transforming)throw new Error("Calling transform done when still transforming");return r.push(null)}Q(X,I);function X(r){if(!(this instanceof X))return new X(r);I.call(this,r)}X.prototype._transform=function(r,e,t){t(null,r)};Q(U,d);U.Readable=v;U.Writable=b;U.Duplex=A;U.Transform=I;U.PassThrough=X;U.Stream=U;function U(){d.call(this)}U.prototype.pipe=function(r,e){var t=this;function i(h){r.writable&&r.write(h)===!1&&t.pause&&t.pause()}t.on("data",i);function n(){t.readable&&t.resume&&t.resume()}r.on("drain",n),!r._isStdio&&(!e||e.end!==!1)&&(t.on("end",a),t.on("close",s));var o=!1;function a(){o||(o=!0,r.end())}function s(){o||(o=!0,typeof r.destroy=="function"&&r.destroy())}function u(h){if(c(),d.listenerCount(this,"error")===0)throw h}t.on("error",u),r.on("error",u);function c(){t.removeListener("data",i),r.removeListener("drain",n),t.removeListener("end",a),t.removeListener("close",s),t.removeListener("error",u),r.removeListener("error",u),t.removeListener("end",c),t.removeListener("close",c),r.removeListener("close",c)}return t.on("end",c),t.on("close",c),r.on("close",c),r.emit("pipe",t),r};class F extends Error{constructor(e,t,...i){Array.isArray(t)&&(t=t.join(" ")),super(t),Error.captureStackTrace!==void 0&&Error.captureStackTrace(this,F),this.code=e;for(const n of i)for(const o in n){const a=n[o];this[o]=Y(a)?a.toString():a==null?a:JSON.parse(JSON.stringify(a))}}}const Cr=function(r){return typeof r=="object"&&r!==null&&!Array.isArray(r)},Vi=46,Hi=/\\(\\)?/g,Gi=RegExp(`[^.[\\]]+|\\[(?:([^"'][^[]*)|(["'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))`,"g"),Qi=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Zi=/^\w*$/,Ki=function(r){return Object.prototype.toString.call(r)},Br=function(r){const e=typeof r;return e==="symbol"||e==="object"&&r&&Ki(r)==="[object Symbol]"},Xi=function(r,e){if(Array.isArray(r))return!1;const t=typeof r;return t==="number"||t==="symbol"||t==="boolean"||!r||Br(r)?!0:Zi.test(r)||!Qi.test(r)||e!=null&&r in Object(e)},en=function(r){const e=[];return r.charCodeAt(0)===Vi&&e.push(""),r.replace(Gi,function(t,i,n,o){let a=t;n?a=o.replace(Hi,"$1"):i&&(a=i.trim()),e.push(a)}),e},rn=function(r,e){return Array.isArray(r)?r:Xi(r,e)?[r]:en(r)},tn=function(r){if(typeof r=="string"||Br(r))return r;const e=`${r}`;return e=="0"&&1/r==-INFINITY?"-0":e},nn=function(r,e){e=rn(e,r);let t=0;const i=e.length;for(;r!=null&&t<i;)r=r[tn(e[t++])];return t&&t===i?r:void 0},Ur=function(r){if(r==null)return[void 0,void 0];if(typeof r!="object")return[Error('Invalid option "columns": expect an array or an object')];if(Array.isArray(r)){const e=[];for(const t of r)if(typeof t=="string")e.push({key:t,header:t});else if(typeof t=="object"&&t!==null&&!Array.isArray(t)){if(!t.key)return[Error('Invalid column definition: property "key" is required')];t.header===void 0&&(t.header=t.key),e.push(t)}else return[Error("Invalid column definition: expect a string or an object")];r=e}else{const e=[];for(const t in r)e.push({key:t,header:r[t]});r=e}return[void 0,r]},on=function(r){return r.replace(/([A-Z])/g,function(e,t){return"_"+t.toLowerCase()})},Or=function(r){const e={};for(const n in r)e[on(n)]=r[n];if(e.bom===void 0||e.bom===null||e.bom===!1)e.bom=!1;else if(e.bom!==!0)return[new F("CSV_OPTION_BOOLEAN_INVALID_TYPE",["option `bom` is optional and must be a boolean value,",`got ${JSON.stringify(e.bom)}`])];if(e.delimiter===void 0||e.delimiter===null)e.delimiter=",";else if(Y(e.delimiter))e.delimiter=e.delimiter.toString();else if(typeof e.delimiter!="string")return[new F("CSV_OPTION_DELIMITER_INVALID_TYPE",["option `delimiter` must be a buffer or a string,",`got ${JSON.stringify(e.delimiter)}`])];if(e.quote===void 0||e.quote===null)e.quote='"';else if(e.quote===!0)e.quote='"';else if(e.quote===!1)e.quote="";else if(Y(e.quote))e.quote=e.quote.toString();else if(typeof e.quote!="string")return[new F("CSV_OPTION_QUOTE_INVALID_TYPE",["option `quote` must be a boolean, a buffer or a string,",`got ${JSON.stringify(e.quote)}`])];if((e.quoted===void 0||e.quoted===null)&&(e.quoted=!1),e.escape_formulas===void 0||e.escape_formulas===null)e.escape_formulas=!1;else if(typeof e.escape_formulas!="boolean")return[new F("CSV_OPTION_ESCAPE_FORMULAS_INVALID_TYPE",["option `escape_formulas` must be a boolean,",`got ${JSON.stringify(e.escape_formulas)}`])];if((e.quoted_empty===void 0||e.quoted_empty===null)&&(e.quoted_empty=void 0),e.quoted_match===void 0||e.quoted_match===null||e.quoted_match===!1?e.quoted_match=null:Array.isArray(e.quoted_match)||(e.quoted_match=[e.quoted_match]),e.quoted_match)for(const n of e.quoted_match){const o=typeof n=="string",a=n instanceof RegExp;if(!o&&!a)return[Error(`Invalid Option: quoted_match must be a string or a regex, got ${JSON.stringify(n)}`)]}if((e.quoted_string===void 0||e.quoted_string===null)&&(e.quoted_string=!1),(e.eof===void 0||e.eof===null)&&(e.eof=!0),e.escape===void 0||e.escape===null)e.escape='"';else if(Y(e.escape))e.escape=e.escape.toString();else if(typeof e.escape!="string")return[Error(`Invalid Option: escape must be a buffer or a string, got ${JSON.stringify(e.escape)}`)];if(e.escape.length>1)return[Error(`Invalid Option: escape must be one character, got ${e.escape.length} characters`)];(e.header===void 0||e.header===null)&&(e.header=!1);const[t,i]=Ur(e.columns);if(t!==void 0)return[t];if(e.columns=i,(e.quoted===void 0||e.quoted===null)&&(e.quoted=!1),(e.cast===void 0||e.cast===null)&&(e.cast={}),(e.cast.bigint===void 0||e.cast.bigint===null)&&(e.cast.bigint=n=>""+n),(e.cast.boolean===void 0||e.cast.boolean===null)&&(e.cast.boolean=n=>n?"1":""),(e.cast.date===void 0||e.cast.date===null)&&(e.cast.date=n=>""+n.getTime()),(e.cast.number===void 0||e.cast.number===null)&&(e.cast.number=n=>""+n),(e.cast.object===void 0||e.cast.object===null)&&(e.cast.object=n=>JSON.stringify(n)),(e.cast.string===void 0||e.cast.string===null)&&(e.cast.string=function(n){return n}),e.on_record!==void 0&&typeof e.on_record!="function")return[Error('Invalid Option: "on_record" must be a function.')];if(e.record_delimiter===void 0||e.record_delimiter===null)e.record_delimiter=`
`;else if(Y(e.record_delimiter))e.record_delimiter=e.record_delimiter.toString();else if(typeof e.record_delimiter!="string")return[Error(`Invalid Option: record_delimiter must be a buffer or a string, got ${JSON.stringify(e.record_delimiter)}`)];switch(e.record_delimiter){case"unix":e.record_delimiter=`
`;break;case"mac":e.record_delimiter="\r";break;case"windows":e.record_delimiter=`\r
`;break;case"ascii":e.record_delimiter="";break;case"unicode":e.record_delimiter="\u2028";break}return[void 0,e]},an=f.from([239,187,191]),sn=function(r,e,t){return{options:r,state:e,info:t,__transform:function(i,n){if(!Array.isArray(i)&&typeof i!="object")return Error(`Invalid Record: expect an array or an object, got ${JSON.stringify(i)}`);if(this.info.records===0){if(Array.isArray(i)){if(this.options.header===!0&&this.options.columns===void 0)return Error("Undiscoverable Columns: header option requires column option or object records")}else if(this.options.columns===void 0){const[s,u]=Ur(Object.keys(i));if(s)return;this.options.columns=u}}if(this.info.records===0){this.bom(n);const s=this.headers(n);if(s)return s}try{this.options.on_record&&this.options.on_record(i,this.info.records)}catch(s){return s}let o,a;if(this.options.eof){if([o,a]=this.stringify(i),o)return o;if(a===void 0)return;a=a+this.options.record_delimiter}else{if([o,a]=this.stringify(i),o)return o;if(a===void 0)return;(this.options.header||this.info.records)&&(a=this.options.record_delimiter+a)}this.info.records++,n(a)},stringify:function(i,n=!1){if(typeof i!="object")return[void 0,i];const{columns:o}=this.options,a=[];if(Array.isArray(i)){o&&i.splice(o.length);for(let u=0;u<i.length;u++){const c=i[u],[h,l]=this.__cast(c,{index:u,column:u,records:this.info.records,header:n});if(h)return[h];a[u]=[l,c]}}else for(let u=0;u<o.length;u++){const c=nn(i,o[u].key),[h,l]=this.__cast(c,{index:u,column:o[u].key,records:this.info.records,header:n});if(h)return[h];a[u]=[l,c]}let s="";for(let u=0;u<a.length;u++){let c,h,[l,p]=a[u];if(typeof l=="string")c=this.options;else if(Cr(l)){if(c=l,l=c.value,delete c.value,typeof l!="string"&&l!==void 0&&l!==null&&h)return[Error(`Invalid Casting Value: returned value must return a string, null or undefined, got ${JSON.stringify(l)}`)];if(c={...this.options,...c},[h,c]=Or(c),h!==void 0)return[h]}else if(l==null)c=this.options;else return[Error(`Invalid Casting Value: returned value must return a string, an object, null or undefined, got ${JSON.stringify(l)}`)];const{delimiter:w,escape:m,quote:y,quoted:O,quoted_empty:T,quoted_string:Z,quoted_match:ie,record_delimiter:xr,escape_formulas:Dr}=c;if(l===""&&p===""){let J=ie&&ie.filter(K=>typeof K=="string"?l.indexOf(K)!==-1:K.test(l));J=J&&J.length>0,(J||T===!0||Z===!0&&T!==!1)===!0&&(l=y+l+y),s+=l}else if(l){if(typeof l!="string")return[Error(`Formatter must return a string, null or undefined, got ${JSON.stringify(l)}`)];const J=w.length&&l.indexOf(w)>=0,me=y!==""&&l.indexOf(y)>=0,K=l.indexOf(m)>=0&&m!==y,Pr=l.indexOf(xr)>=0,Nr=Z&&typeof p=="string";let ne=ie&&ie.filter(k=>typeof k=="string"?l.indexOf(k)!==-1:k.test(l));if(ne=ne&&ne.length>0,Dr)switch(l[0]){case"=":case"+":case"-":case"@":case"	":case"\r":case"＝":case"＋":case"－":case"＠":l=`'${l}`;break}const qe=me===!0||J||Pr||O||Nr||ne;if(qe===!0&&K===!0){const k=m==="\\"?new RegExp(m+m,"g"):new RegExp(m,"g");l=l.replace(k,m+m)}if(me===!0){const k=new RegExp(y,"g");l=l.replace(k,m+y)}qe===!0&&(l=y+l+y),s+=l}else(T===!0||p===""&&Z===!0&&T!==!1)&&(s+=y+y);u!==a.length-1&&(s+=w)}return[void 0,s]},bom:function(i){this.options.bom===!0&&i(an)},headers:function(i){if(this.options.header===!1||this.options.columns===void 0)return;let n,o=this.options.columns.map(a=>a.header);if(this.options.eof?([n,o]=this.stringify(o,!0),o+=this.options.record_delimiter):[n,o]=this.stringify(o),n)return n;i(o)},__cast:function(i,n){const o=typeof i;try{return o==="string"?[void 0,this.options.cast.string(i,n)]:o==="bigint"?[void 0,this.options.cast.bigint(i,n)]:o==="number"?[void 0,this.options.cast.number(i,n)]:o==="boolean"?[void 0,this.options.cast.boolean(i,n)]:i instanceof Date?[void 0,this.options.cast.date(i,n)]:o==="object"&&i!==null?[void 0,this.options.cast.object(i,n)]:[void 0,i,i]}catch(a){return[a]}}}};class un extends I{constructor(e={}){super({writableObjectMode:!0,...e});const[t,i]=Or(e);if(t!==void 0)throw t;this.options=i,this.state={stop:!1},this.info={records:0},this.api=sn(this.options,this.state,this.info),this.api.options.on_record=(...n)=>{this.emit("record",...n)}}_transform(e,t,i){if(this.state.stop===!0)return;const n=this.api.__transform(e,this.push.bind(this));n!==void 0&&(this.state.stop=!0),i(n)}_flush(e){if(this.state.stop!==!0){if(this.info.records===0){this.api.bom(this.push.bind(this));const t=this.api.headers(this.push.bind(this));t&&e(t)}e()}}}const fn=function(){let r,e,t;for(const n in arguments){const o=arguments[n],a=typeof o;if(r===void 0&&Array.isArray(o))r=o;else if(e===void 0&&Cr(o))e=o;else if(t===void 0&&a==="function")t=o;else throw new F("CSV_INVALID_ARGUMENT",["Invalid argument:",`got ${JSON.stringify(o)} at index ${n}`])}const i=new un(e);if(t){const n=[];i.on("readable",function(){let o;for(;(o=this.read())!==null;)n.push(o)}),i.on("error",function(o){t(o)}),i.on("end",function(){try{t(void 0,n.join(""))}catch(o){t(o);return}})}if(r!==void 0){const n=function(){for(const o of r)i.write(o);i.end()};typeof setImmediate=="function"?setImmediate(n):setTimeout(n,0)}return i},hn=jr(()=>{const r=qr(),e=oe(()=>new Intl.NumberFormat(r.value,{useGrouping:!1})),t=oe(()=>new Intl.DateTimeFormat(r.value,{day:"2-digit",month:"2-digit",year:"numeric"})),i=oe(()=>new Intl.DateTimeFormat(r.value,{hour:"2-digit",minute:"2-digit",second:"2-digit"})),n=oe(()=>r.value==="de"?";":",");function o(s,u){const c=[...u.columns],h=[];for(const p of c)if("value"in p){const w=Math.random().toString(36).substring(7);s=s.map(O=>({...O,[w]:p.value(O)}));const{value:m,...y}=p;h.push({...y,key:w})}else h.push(p);const l={delimiter:n.value,header:!0,bom:!0,...u,columns:h,cast:{number:p=>e.value.format(p),date:p=>`${t.value.format(p)} ${i.value.format(p)}`,...u.cast}};return new Promise((p,w)=>{fn(s,l,function(m,y){m&&w(m),p(y)})})}async function a(s,u,c){const h=await o(s,u);kr(h,"text/csv",c)}return{stringifyCsv:o,stringifyAndDownloadCsv:a}});export{hn as u};
