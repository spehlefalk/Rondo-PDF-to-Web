import{c as Q,v as ee,m as x,w as k,y as o,x as fe,z as ue,A as G,p as j,F as he,d as pe,D as T,G as q,H as ye,V as _,I as me,J as ve,R as P,s as be,_ as w,a as N,K as Re,L as Se,M as Ce,P as W,O as Ee,Q as we,B as L,T as xe,n as De,k as ke,E as Me,g as Te,U as $,W as He,h as K,X as Pe,Y as Ne,Z as Ie,i as ze,$ as Oe,a0 as A,a1 as We,N as Ae,a2 as Be,f as Fe,a3 as je,a4 as Le,a5 as Ve,a6 as Ue}from"./index-CsgZOv_I.js";import{a as te,ag as O,ah as Ge,aC as qe,r as H,Y,k as _e,w as $e,_ as Z,W as Ke,U as B,V as Ye}from"./vendor-DP6O45ke.js";import{T as Ze,b3 as Je}from"./index-Dsay-W0g.js";class Xe extends T{constructor(){super(...arguments),this.headerElRef=k()}renderSimpleLayout(e,t){let{props:n,context:r}=this,i=[],a=q(r.options);return e&&i.push({type:"header",key:"header",isSticky:a,chunk:{elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:e}}),i.push({type:"body",key:"body",liquid:!0,chunk:{content:t}}),o(_,{elClasses:["fc-daygrid"],viewSpec:r.viewSpec},o(ye,{liquid:!n.isHeightAuto&&!n.forPrint,collapsibleWidth:n.forPrint,cols:[],sections:i}))}renderHScrollLayout(e,t,n,r){let i=this.context.pluginHooks.scrollGridImpl;if(!i)throw new Error("No ScrollGrid implementation");let{props:a,context:l}=this,p=!a.forPrint&&q(l.options),d=!a.forPrint&&me(l.options),c=[];return e&&c.push({type:"header",key:"header",isSticky:p,chunks:[{key:"main",elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:e}]}),c.push({type:"body",key:"body",liquid:!0,chunks:[{key:"main",content:t}]}),d&&c.push({type:"footer",key:"footer",isSticky:!0,chunks:[{key:"main",content:ve}]}),o(_,{elClasses:["fc-daygrid"],viewSpec:l.viewSpec},o(i,{liquid:!a.isHeightAuto&&!a.forPrint,forPrint:a.forPrint,collapsibleWidth:a.forPrint,colGroups:[{cols:[{span:n,minWidth:r}]}],sections:c}))}}function I(s,e){let t=[];for(let n=0;n<e;n+=1)t[n]=[];for(let n of s)t[n.row].push(n);return t}function z(s,e){let t=[];for(let n=0;n<e;n+=1)t[n]=[];for(let n of s)t[n.firstCol].push(n);return t}function J(s,e){let t=[];if(s){for(let n=0;n<e;n+=1)t[n]={affectedInstances:s.affectedInstances,isEvent:s.isEvent,segs:[]};for(let n of s.segs)t[n.row].segs.push(n)}else for(let n=0;n<e;n+=1)t[n]=null;return t}const ne=Q({hour:"numeric",minute:"2-digit",omitZeroMinute:!0,meridiem:"narrow"});function se(s){let{display:e}=s.eventRange.ui;return e==="list-item"||e==="auto"&&!s.eventRange.def.allDay&&s.firstCol===s.lastCol&&s.isStart&&s.isEnd}class ie extends L{render(){let{props:e}=this;return o(xe,Object.assign({},e,{elClasses:["fc-daygrid-event","fc-daygrid-block-event","fc-h-event"],defaultTimeFormat:ne,defaultDisplayEventEnd:e.defaultDisplayEventEnd,disableResizing:!e.seg.eventRange.def.allDay}))}}class re extends L{render(){let{props:e,context:t}=this,{options:n}=t,{seg:r}=e,i=n.eventTimeFormat||ne,a=De(r,i,t,!0,e.defaultDisplayEventEnd);return o(Me,Object.assign({},e,{elTag:"a",elClasses:["fc-daygrid-event","fc-daygrid-dot-event"],elAttrs:ke(e.seg,t),defaultGenerator:Qe,timeText:a,isResizing:!1,isDateSelecting:!1}))}}function Qe(s){return o(w,null,o("div",{className:"fc-daygrid-event-dot",style:{borderColor:s.borderColor||s.backgroundColor}}),s.timeText&&o("div",{className:"fc-event-time"},s.timeText),o("div",{className:"fc-event-title"},s.event.title||o(w,null," ")))}class et extends L{constructor(){super(...arguments),this.compileSegs=x(tt)}render(){let{props:e}=this,{allSegs:t,invisibleSegs:n}=this.compileSegs(e.singlePlacements);return o(Le,{elClasses:["fc-daygrid-more-link"],dateProfile:e.dateProfile,todayRange:e.todayRange,allDayDate:e.allDayDate,moreCnt:e.moreCnt,allSegs:t,hiddenSegs:n,alignmentElRef:e.alignmentElRef,alignGridTop:e.alignGridTop,extraDateSpan:e.extraDateSpan,popoverContent:()=>{let r=(e.eventDrag?e.eventDrag.affectedInstances:null)||(e.eventResize?e.eventResize.affectedInstances:null)||{};return o(w,null,t.map(i=>{let a=i.eventRange.instance.instanceId;return o("div",{className:"fc-daygrid-event-harness",key:a,style:{visibility:r[a]?"hidden":""}},se(i)?o(re,Object.assign({seg:i,isDragging:!1,isSelected:a===e.eventSelection,defaultDisplayEventEnd:!1},N(i,e.todayRange))):o(ie,Object.assign({seg:i,isDragging:!1,isResizing:!1,isDateSelecting:!1,isSelected:a===e.eventSelection,defaultDisplayEventEnd:!1},N(i,e.todayRange))))}))}})}}function tt(s){let e=[],t=[];for(let n of s)e.push(n.seg),n.isVisible||t.push(n.seg);return{allSegs:e,invisibleSegs:t}}const nt=Q({week:"narrow"});class st extends T{constructor(){super(...arguments),this.rootElRef=k(),this.state={dayNumberId:Te()},this.handleRootEl=e=>{$(this.rootElRef,e),$(this.props.elRef,e)}}render(){let{context:e,props:t,state:n,rootElRef:r}=this,{options:i,dateEnv:a}=e,{date:l,dateProfile:p}=t;const d=t.showDayNumber&&rt(l,p.currentRange,a);return o(Ne,{elTag:"td",elRef:this.handleRootEl,elClasses:["fc-daygrid-day",...t.extraClassNames||[]],elAttrs:Object.assign(Object.assign(Object.assign({},t.extraDataAttrs),t.showDayNumber?{"aria-labelledby":n.dayNumberId}:{}),{role:"gridcell"}),defaultGenerator:it,date:l,dateProfile:p,todayRange:t.todayRange,showDayNumber:t.showDayNumber,isMonthStart:d,extraRenderProps:t.extraRenderProps},(c,b)=>o("div",{ref:t.innerElRef,className:"fc-daygrid-day-frame fc-scrollgrid-sync-inner",style:{minHeight:t.minHeight}},t.showWeekNumber&&o(He,{elTag:"a",elClasses:["fc-daygrid-week-number"],elAttrs:K(e,l,"week"),date:l,defaultFormat:nt}),!b.isDisabled&&(t.showDayNumber||Pe(i)||t.forceDayTop)?o("div",{className:"fc-daygrid-day-top"},o(c,{elTag:"a",elClasses:["fc-daygrid-day-number",d&&"fc-daygrid-month-start"],elAttrs:Object.assign(Object.assign({},K(e,l)),{id:n.dayNumberId})})):t.showDayNumber?o("div",{className:"fc-daygrid-day-top",style:{visibility:"hidden"}},o("a",{className:"fc-daygrid-day-number"}," ")):void 0,o("div",{className:"fc-daygrid-day-events",ref:t.fgContentElRef},t.fgContent,o("div",{className:"fc-daygrid-day-bottom",style:{marginTop:t.moreMarginTop}},o(et,{allDayDate:l,singlePlacements:t.singlePlacements,moreCnt:t.moreCnt,alignmentElRef:r,alignGridTop:!t.showDayNumber,extraDateSpan:t.extraDateSpan,dateProfile:t.dateProfile,eventSelection:t.eventSelection,eventDrag:t.eventDrag,eventResize:t.eventResize,todayRange:t.todayRange}))),o("div",{className:"fc-daygrid-day-bg"},t.bgContent)))}}function it(s){return s.dayNumberText||o(w,null," ")}function rt(s,e,t){const{start:n,end:r}=e,i=Ie(r,-1),a=t.getYear(n),l=t.getMonth(n),p=t.getYear(i),d=t.getMonth(i);return!(a===p&&l===d)&&(s.valueOf()===n.valueOf()||t.getDay(s)===1&&s.valueOf()<r.valueOf())}function ae(s){return s.eventRange.instance.instanceId+":"+s.firstCol}function le(s){return ae(s)+":"+s.lastCol}function at(s,e,t,n,r,i,a){let l=new dt(h=>{let v=s[h.index].eventRange.instance.instanceId+":"+h.span.start+":"+(h.span.end-1);return r[v]});l.allowReslicing=!0,l.strictOrder=n,e===!0||t===!0?(l.maxCoord=i,l.hiddenConsumes=!0):typeof e=="number"?l.maxStackCnt=e:typeof t=="number"&&(l.maxStackCnt=t,l.hiddenConsumes=!0);let p=[],d=[];for(let h=0;h<s.length;h+=1){let v=s[h],C=le(v);r[C]!=null?p.push({index:h,span:{start:v.firstCol,end:v.lastCol+1}}):d.push(v)}let c=l.addSegs(p),b=l.toRects(),{singleColPlacements:S,multiColPlacements:g,leftoverMargins:y}=lt(b,s,a),u=[],m=[];for(let h of d){g[h.firstCol].push({seg:h,isVisible:!1,isAbsolute:!0,absoluteTop:0,marginTop:0});for(let v=h.firstCol;v<=h.lastCol;v+=1)S[v].push({seg:M(h,v,v+1,a),isVisible:!1,isAbsolute:!1,absoluteTop:0,marginTop:0})}for(let h=0;h<a.length;h+=1)u.push(0);for(let h of c){let v=s[h.index],C=h.span;g[C.start].push({seg:M(v,C.start,C.end,a),isVisible:!1,isAbsolute:!0,absoluteTop:0,marginTop:0});for(let E=C.start;E<C.end;E+=1)u[E]+=1,S[E].push({seg:M(v,E,E+1,a),isVisible:!1,isAbsolute:!1,absoluteTop:0,marginTop:0})}for(let h=0;h<a.length;h+=1)m.push(y[h]);return{singleColPlacements:S,multiColPlacements:g,moreCnts:u,moreMarginTops:m}}function lt(s,e,t){let n=ot(s,t.length),r=[],i=[],a=[];for(let l=0;l<t.length;l+=1){let p=n[l],d=[],c=0,b=0;for(let g of p){let y=e[g.index];d.push({seg:M(y,l,l+1,t),isVisible:!0,isAbsolute:!1,absoluteTop:g.levelCoord,marginTop:g.levelCoord-c}),c=g.levelCoord+g.thickness}let S=[];c=0,b=0;for(let g of p){let y=e[g.index],u=g.span.end-g.span.start>1,m=g.span.start===l;b+=g.levelCoord-c,c=g.levelCoord+g.thickness,u?(b+=g.thickness,m&&S.push({seg:M(y,g.span.start,g.span.end,t),isVisible:!0,isAbsolute:!0,absoluteTop:g.levelCoord,marginTop:0})):m&&(S.push({seg:M(y,g.span.start,g.span.end,t),isVisible:!0,isAbsolute:!1,absoluteTop:g.levelCoord,marginTop:b}),b=0)}r.push(d),i.push(S),a.push(b)}return{singleColPlacements:r,multiColPlacements:i,leftoverMargins:a}}function ot(s,e){let t=[];for(let n=0;n<e;n+=1)t.push([]);for(let n of s)for(let r=n.span.start;r<n.span.end;r+=1)t[r].push(n);return t}function M(s,e,t,n){if(s.firstCol===e&&s.lastCol===t-1)return s;let r=s.eventRange,i=r.range,a=ze(i,{start:n[e].date,end:j(n[t-1].date,1)});return Object.assign(Object.assign({},s),{firstCol:e,lastCol:t-1,eventRange:{def:r.def,ui:Object.assign(Object.assign({},r.ui),{durationEditable:!1}),instance:r.instance,range:a},isStart:s.isStart&&a.start.valueOf()===i.start.valueOf(),isEnd:s.isEnd&&a.end.valueOf()===i.end.valueOf()})}class dt extends Oe{constructor(){super(...arguments),this.hiddenConsumes=!1,this.forceHidden={}}addSegs(e){const t=super.addSegs(e),{entriesByLevel:n}=this,r=i=>!this.forceHidden[A(i)];for(let i=0;i<n.length;i+=1)n[i]=n[i].filter(r);return t}handleInvalidInsertion(e,t,n){const{entriesByLevel:r,forceHidden:i}=this,{touchingEntry:a,touchingLevel:l,touchingLateral:p}=e;if(this.hiddenConsumes&&a){const d=A(a);if(!i[d])if(this.allowReslicing){const c=Object.assign(Object.assign({},a),{span:We(a.span,t.span)}),b=A(c);i[b]=!0,r[l][p]=c,this.splitEntry(a,t,n)}else i[d]=!0,n.push(a)}return super.handleInvalidInsertion(e,t,n)}}class oe extends T{constructor(){super(...arguments),this.cellElRefs=new P,this.frameElRefs=new P,this.fgElRefs=new P,this.segHarnessRefs=new P,this.rootElRef=k(),this.state={framePositions:null,maxContentHeight:null,segHeights:{}},this.handleResize=e=>{e&&this.updateSizing(!0)}}render(){let{props:e,state:t,context:n}=this,{options:r}=n,i=e.cells.length,a=z(e.businessHourSegs,i),l=z(e.bgEventSegs,i),p=z(this.getHighlightSegs(),i),d=z(this.getMirrorSegs(),i),{singleColPlacements:c,multiColPlacements:b,moreCnts:S,moreMarginTops:g}=at(be(e.fgEventSegs,r.eventOrder),e.dayMaxEvents,e.dayMaxEventRows,r.eventOrderStrict,t.segHeights,t.maxContentHeight,e.cells),y=e.eventDrag&&e.eventDrag.affectedInstances||e.eventResize&&e.eventResize.affectedInstances||{};return o("tr",{ref:this.rootElRef,role:"row"},e.renderIntro&&e.renderIntro(),e.cells.map((u,m)=>{let h=this.renderFgSegs(m,e.forPrint?c[m]:b[m],e.todayRange,y),v=this.renderFgSegs(m,ct(d[m],b),e.todayRange,{},!!e.eventDrag,!!e.eventResize,!1);return o(st,{key:u.key,elRef:this.cellElRefs.createRef(u.key),innerElRef:this.frameElRefs.createRef(u.key),dateProfile:e.dateProfile,date:u.date,showDayNumber:e.showDayNumbers,showWeekNumber:e.showWeekNumbers&&m===0,forceDayTop:e.showWeekNumbers,todayRange:e.todayRange,eventSelection:e.eventSelection,eventDrag:e.eventDrag,eventResize:e.eventResize,extraRenderProps:u.extraRenderProps,extraDataAttrs:u.extraDataAttrs,extraClassNames:u.extraClassNames,extraDateSpan:u.extraDateSpan,moreCnt:S[m],moreMarginTop:g[m],singlePlacements:c[m],fgContentElRef:this.fgElRefs.createRef(u.key),fgContent:o(w,null,o(w,null,h),o(w,null,v)),bgContent:o(w,null,this.renderFillSegs(p[m],"highlight"),this.renderFillSegs(a[m],"non-business"),this.renderFillSegs(l[m],"bg-event")),minHeight:e.cellMinHeight})}))}componentDidMount(){this.updateSizing(!0),this.context.addResizeHandler(this.handleResize)}componentDidUpdate(e,t){let n=this.props;this.updateSizing(!ee(e,n))}componentWillUnmount(){this.context.removeResizeHandler(this.handleResize)}getHighlightSegs(){let{props:e}=this;return e.eventDrag&&e.eventDrag.segs.length?e.eventDrag.segs:e.eventResize&&e.eventResize.segs.length?e.eventResize.segs:e.dateSelectionSegs}getMirrorSegs(){let{props:e}=this;return e.eventResize&&e.eventResize.segs.length?e.eventResize.segs:[]}renderFgSegs(e,t,n,r,i,a,l){let{context:p}=this,{eventSelection:d}=this.props,{framePositions:c}=this.state,b=this.props.cells.length===1,S=i||a||l,g=[];if(c)for(let y of t){let{seg:u}=y,{instanceId:m}=u.eventRange.instance,h=y.isVisible&&!r[m],v=y.isAbsolute,C="",E="";v&&(p.isRtl?(E=0,C=c.lefts[u.lastCol]-c.lefts[u.firstCol]):(C=0,E=c.rights[u.firstCol]-c.rights[u.lastCol])),g.push(o("div",{className:"fc-daygrid-event-harness"+(v?" fc-daygrid-event-harness-abs":""),key:ae(u),ref:S?null:this.segHarnessRefs.createRef(le(u)),style:{visibility:h?"":"hidden",marginTop:v?"":y.marginTop,top:v?y.absoluteTop:"",left:C,right:E}},se(u)?o(re,Object.assign({seg:u,isDragging:i,isSelected:m===d,defaultDisplayEventEnd:b},N(u,n))):o(ie,Object.assign({seg:u,isDragging:i,isResizing:a,isDateSelecting:l,isSelected:m===d,defaultDisplayEventEnd:b},N(u,n)))))}return g}renderFillSegs(e,t){let{isRtl:n}=this.context,{todayRange:r}=this.props,{framePositions:i}=this.state,a=[];if(i)for(let l of e){let p=n?{right:0,left:i.lefts[l.lastCol]-i.lefts[l.firstCol]}:{left:0,right:i.rights[l.firstCol]-i.rights[l.lastCol]};a.push(o("div",{key:Ce(l.eventRange),className:"fc-daygrid-bg-harness",style:p},t==="bg-event"?o(Re,Object.assign({seg:l},N(l,r))):Se(t)))}return o(w,{},...a)}updateSizing(e){let{props:t,state:n,frameElRefs:r}=this;if(!t.forPrint&&t.clientWidth!==null){if(e){let p=t.cells.map(d=>r.currentMap[d.key]);if(p.length){let d=this.rootElRef.current,c=new W(d,p,!0,!1);(!n.framePositions||!n.framePositions.similarTo(c))&&this.setState({framePositions:new W(d,p,!0,!1)})}}const i=this.state.segHeights,a=this.querySegHeights(),l=t.dayMaxEvents===!0||t.dayMaxEventRows===!0;this.safeSetState({segHeights:Object.assign(Object.assign({},i),a),maxContentHeight:l?this.computeMaxContentHeight():null})}}querySegHeights(){let e=this.segHarnessRefs.currentMap,t={};for(let n in e){let r=Math.round(e[n].getBoundingClientRect().height);t[n]=Math.max(t[n]||0,r)}return t}computeMaxContentHeight(){let e=this.props.cells[0].key,t=this.cellElRefs.currentMap[e],n=this.fgElRefs.currentMap[e];return t.getBoundingClientRect().bottom-n.getBoundingClientRect().top}getCellEls(){let e=this.cellElRefs.currentMap;return this.props.cells.map(t=>e[t.key])}}oe.addStateEquality({segHeights:ee});function ct(s,e){if(!s.length)return[];let t=gt(e);return s.map(n=>({seg:n,isVisible:!0,isAbsolute:!0,absoluteTop:t[n.eventRange.instance.instanceId],marginTop:0}))}function gt(s){let e={};for(let t of s)for(let n of t)e[n.seg.eventRange.instance.instanceId]=n.absoluteTop;return e}class ft extends T{constructor(){super(...arguments),this.splitBusinessHourSegs=x(I),this.splitBgEventSegs=x(I),this.splitFgEventSegs=x(I),this.splitDateSelectionSegs=x(I),this.splitEventDrag=x(J),this.splitEventResize=x(J),this.rowRefs=new P}render(){let{props:e,context:t}=this,n=e.cells.length,r=this.splitBusinessHourSegs(e.businessHourSegs,n),i=this.splitBgEventSegs(e.bgEventSegs,n),a=this.splitFgEventSegs(e.fgEventSegs,n),l=this.splitDateSelectionSegs(e.dateSelectionSegs,n),p=this.splitEventDrag(e.eventDrag,n),d=this.splitEventResize(e.eventResize,n),c=n>=7&&e.clientWidth?e.clientWidth/t.options.aspectRatio/6:null;return o(Ae,{unit:"day"},(b,S)=>o(w,null,e.cells.map((g,y)=>o(oe,{ref:this.rowRefs.createRef(y),key:g.length?g[0].date.toISOString():y,showDayNumbers:n>1,showWeekNumbers:e.showWeekNumbers,todayRange:S,dateProfile:e.dateProfile,cells:g,renderIntro:e.renderRowIntro,businessHourSegs:r[y],eventSelection:e.eventSelection,bgEventSegs:i[y].filter(ut),fgEventSegs:a[y],dateSelectionSegs:l[y],eventDrag:p[y],eventResize:d[y],dayMaxEvents:e.dayMaxEvents,dayMaxEventRows:e.dayMaxEventRows,clientWidth:e.clientWidth,clientHeight:e.clientHeight,cellMinHeight:c,forPrint:e.forPrint}))))}componentDidMount(){this.registerInteractiveComponent()}componentDidUpdate(){this.registerInteractiveComponent()}registerInteractiveComponent(){if(!this.rootEl){const e=this.rowRefs.currentMap[0].getCellEls()[0],t=e?e.closest(".fc-daygrid-body"):null;t&&(this.rootEl=t,this.context.registerInteractiveComponent(this,{el:t,isHitComboAllowed:this.props.isHitComboAllowed}))}}componentWillUnmount(){this.rootEl&&(this.context.unregisterInteractiveComponent(this),this.rootEl=null)}prepareHits(){this.rowPositions=new W(this.rootEl,this.rowRefs.collect().map(e=>e.getCellEls()[0]),!1,!0),this.colPositions=new W(this.rootEl,this.rowRefs.currentMap[0].getCellEls(),!0,!1)}queryHit(e,t){let{colPositions:n,rowPositions:r}=this,i=n.leftToIndex(e),a=r.topToIndex(t);if(a!=null&&i!=null){let l=this.props.cells[a][i];return{dateProfile:this.props.dateProfile,dateSpan:Object.assign({range:this.getCellRange(a,i),allDay:!0},l.extraDateSpan),dayEl:this.getCellEl(a,i),rect:{left:n.lefts[i],right:n.rights[i],top:r.tops[a],bottom:r.bottoms[a]},layer:0}}return null}getCellEl(e,t){return this.rowRefs.currentMap[e].getCellEls()[t]}getCellRange(e,t){let n=this.props.cells[e][t].date,r=j(n,1);return{start:n,end:r}}}function ut(s){return s.eventRange.def.allDay}class ht extends T{constructor(){super(...arguments),this.elRef=k(),this.needsScrollReset=!1}render(){let{props:e}=this,{dayMaxEventRows:t,dayMaxEvents:n,expandRows:r}=e,i=n===!0||t===!0;i&&!r&&(i=!1,t=null,n=null);let a=["fc-daygrid-body",i?"fc-daygrid-body-balanced":"fc-daygrid-body-unbalanced",r?"":"fc-daygrid-body-natural"];return o("div",{ref:this.elRef,className:a.join(" "),style:{width:e.clientWidth,minWidth:e.tableMinWidth}},o("table",{role:"presentation",className:"fc-scrollgrid-sync-table",style:{width:e.clientWidth,minWidth:e.tableMinWidth,height:r?e.clientHeight:""}},e.colGroupNode,o("tbody",{role:"presentation"},o(ft,{dateProfile:e.dateProfile,cells:e.cells,renderRowIntro:e.renderRowIntro,showWeekNumbers:e.showWeekNumbers,clientWidth:e.clientWidth,clientHeight:e.clientHeight,businessHourSegs:e.businessHourSegs,bgEventSegs:e.bgEventSegs,fgEventSegs:e.fgEventSegs,dateSelectionSegs:e.dateSelectionSegs,eventSelection:e.eventSelection,eventDrag:e.eventDrag,eventResize:e.eventResize,dayMaxEvents:n,dayMaxEventRows:t,forPrint:e.forPrint,isHitComboAllowed:e.isHitComboAllowed}))))}componentDidMount(){this.requestScrollReset()}componentDidUpdate(e){e.dateProfile!==this.props.dateProfile?this.requestScrollReset():this.flushScrollReset()}requestScrollReset(){this.needsScrollReset=!0,this.flushScrollReset()}flushScrollReset(){if(this.needsScrollReset&&this.props.clientWidth){const e=pt(this.elRef.current,this.props.dateProfile);if(e){const t=e.closest(".fc-daygrid-body"),n=t.closest(".fc-scroller"),r=e.getBoundingClientRect().top-t.getBoundingClientRect().top;n.scrollTop=r?r+1:0}this.needsScrollReset=!1}}}function pt(s,e){let t;return e.currentRangeUnit.match(/year|month/)&&(t=s.querySelector(`[data-date="${Be(e.currentDate)}-01"]`)),t||(t=s.querySelector(`[data-date="${Fe(e.currentDate)}"]`)),t}class yt extends je{constructor(){super(...arguments),this.forceDayIfListItem=!0}sliceRange(e,t){return t.sliceRange(e)}}class mt extends T{constructor(){super(...arguments),this.slicer=new yt,this.tableRef=k()}render(){let{props:e,context:t}=this;return o(ht,Object.assign({ref:this.tableRef},this.slicer.sliceProps(e,e.dateProfile,e.nextDayThreshold,t,e.dayTableModel),{dateProfile:e.dateProfile,cells:e.dayTableModel.cells,colGroupNode:e.colGroupNode,tableMinWidth:e.tableMinWidth,renderRowIntro:e.renderRowIntro,dayMaxEvents:e.dayMaxEvents,dayMaxEventRows:e.dayMaxEventRows,showWeekNumbers:e.showWeekNumbers,expandRows:e.expandRows,headerAlignElRef:e.headerAlignElRef,clientWidth:e.clientWidth,clientHeight:e.clientHeight,forPrint:e.forPrint}))}}class Ht extends Xe{constructor(){super(...arguments),this.buildDayTableModel=x(vt),this.headerRef=k(),this.tableRef=k()}render(){let{options:e,dateProfileGenerator:t}=this.context,{props:n}=this,r=this.buildDayTableModel(n.dateProfile,t),i=e.dayHeaders&&o(fe,{ref:this.headerRef,dateProfile:n.dateProfile,dates:r.headerDates,datesRepDistinctDays:r.rowCnt===1}),a=l=>o(mt,{ref:this.tableRef,dateProfile:n.dateProfile,dayTableModel:r,businessHours:n.businessHours,dateSelection:n.dateSelection,eventStore:n.eventStore,eventUiBases:n.eventUiBases,eventSelection:n.eventSelection,eventDrag:n.eventDrag,eventResize:n.eventResize,nextDayThreshold:e.nextDayThreshold,colGroupNode:l.tableColGroupNode,tableMinWidth:l.tableMinWidth,dayMaxEvents:e.dayMaxEvents,dayMaxEventRows:e.dayMaxEventRows,showWeekNumbers:e.weekNumbers,expandRows:!n.isHeightAuto,headerAlignElRef:this.headerElRef,clientWidth:l.clientWidth,clientHeight:l.clientHeight,forPrint:n.forPrint});return e.dayMinWidth?this.renderHScrollLayout(i,a,r.colCnt,e.dayMinWidth):this.renderSimpleLayout(i,a)}}function vt(s,e){let t=new Ee(s.renderRange,e);return new we(t,/year|month|week/.test(s.currentRangeUnit))}class Pt extends ue{buildRenderRange(e,t,n){let r=super.buildRenderRange(e,t,n),{props:i}=this;return bt({currentRange:r,snapToWeek:/^(year|month)$/.test(t),fixedWeekCount:i.fixedWeekCount,dateEnv:i.dateEnv})}}function bt(s){let{dateEnv:e,currentRange:t}=s,{start:n,end:r}=t,i;if(s.snapToWeek&&(n=e.startOfWeek(n),i=e.startOfWeek(r),i.valueOf()!==r.valueOf()&&(r=G(i,1))),s.fixedWeekCount){let a=e.startOfWeek(e.startOfMonth(j(t.end,-1))),l=Math.ceil(he(a,r));r=G(r,6-l)}return{start:n,end:r}}var Rt=':root{--fc-daygrid-event-dot-width:8px}.fc-daygrid-day-events:after,.fc-daygrid-day-events:before,.fc-daygrid-day-frame:after,.fc-daygrid-day-frame:before,.fc-daygrid-event-harness:after,.fc-daygrid-event-harness:before{clear:both;content:"";display:table}.fc .fc-daygrid-body{position:relative;z-index:1}.fc .fc-daygrid-day.fc-day-today{background-color:var(--fc-today-bg-color)}.fc .fc-daygrid-day-frame{min-height:100%;position:relative}.fc .fc-daygrid-day-top{display:flex;flex-direction:row-reverse}.fc .fc-day-other .fc-daygrid-day-top{opacity:.3}.fc .fc-daygrid-day-number{padding:4px;position:relative;z-index:4}.fc .fc-daygrid-month-start{font-size:1.1em;font-weight:700}.fc .fc-daygrid-day-events{margin-top:1px}.fc .fc-daygrid-body-balanced .fc-daygrid-day-events{left:0;position:absolute;right:0}.fc .fc-daygrid-body-unbalanced .fc-daygrid-day-events{min-height:2em;position:relative}.fc .fc-daygrid-body-natural .fc-daygrid-day-events{margin-bottom:1em}.fc .fc-daygrid-event-harness{position:relative}.fc .fc-daygrid-event-harness-abs{left:0;position:absolute;right:0;top:0}.fc .fc-daygrid-bg-harness{bottom:0;position:absolute;top:0}.fc .fc-daygrid-day-bg .fc-non-business{z-index:1}.fc .fc-daygrid-day-bg .fc-bg-event{z-index:2}.fc .fc-daygrid-day-bg .fc-highlight{z-index:3}.fc .fc-daygrid-event{margin-top:1px;z-index:6}.fc .fc-daygrid-event.fc-event-mirror{z-index:7}.fc .fc-daygrid-day-bottom{font-size:.85em;margin:0 2px}.fc .fc-daygrid-day-bottom:after,.fc .fc-daygrid-day-bottom:before{clear:both;content:"";display:table}.fc .fc-daygrid-more-link{border-radius:3px;cursor:pointer;line-height:1;margin-top:1px;max-width:100%;overflow:hidden;padding:2px;position:relative;white-space:nowrap;z-index:4}.fc .fc-daygrid-more-link:hover{background-color:rgba(0,0,0,.1)}.fc .fc-daygrid-week-number{background-color:var(--fc-neutral-bg-color);color:var(--fc-neutral-text-color);min-width:1.5em;padding:2px;position:absolute;text-align:center;top:0;z-index:5}.fc .fc-more-popover .fc-popover-body{min-width:220px;padding:10px}.fc-direction-ltr .fc-daygrid-event.fc-event-start,.fc-direction-rtl .fc-daygrid-event.fc-event-end{margin-left:2px}.fc-direction-ltr .fc-daygrid-event.fc-event-end,.fc-direction-rtl .fc-daygrid-event.fc-event-start{margin-right:2px}.fc-direction-ltr .fc-daygrid-more-link{float:left}.fc-direction-ltr .fc-daygrid-week-number{border-radius:0 0 3px 0;left:0}.fc-direction-rtl .fc-daygrid-more-link{float:right}.fc-direction-rtl .fc-daygrid-week-number{border-radius:0 0 0 3px;right:0}.fc-liquid-hack .fc-daygrid-day-frame{position:static}.fc-daygrid-event{border-radius:3px;font-size:var(--fc-small-font-size);position:relative;white-space:nowrap}.fc-daygrid-block-event .fc-event-time{font-weight:700}.fc-daygrid-block-event .fc-event-time,.fc-daygrid-block-event .fc-event-title{padding:1px}.fc-daygrid-dot-event{align-items:center;display:flex;padding:2px 0}.fc-daygrid-dot-event .fc-event-title{flex-grow:1;flex-shrink:1;font-weight:700;min-width:0;overflow:hidden}.fc-daygrid-dot-event.fc-event-mirror,.fc-daygrid-dot-event:hover{background:rgba(0,0,0,.1)}.fc-daygrid-dot-event.fc-event-selected:before{bottom:-10px;top:-10px}.fc-daygrid-event-dot{border:calc(var(--fc-daygrid-event-dot-width)/2) solid var(--fc-event-border-color);border-radius:calc(var(--fc-daygrid-event-dot-width)/2);box-sizing:content-box;height:0;margin:0 4px;width:0}.fc-direction-ltr .fc-daygrid-event .fc-event-time{margin-right:3px}.fc-direction-rtl .fc-daygrid-event .fc-event-time{margin-left:3px}';pe(Rt);const St={headerToolbar:!0,footerToolbar:!0,events:!0,eventSources:!0,resources:!0},Nt=te({props:{options:Object},data(){return{renderId:0,customRenderingMap:new Map}},methods:{getApi(){return this.calendar},buildOptions(s){return{...s,customRenderingMetaMap:wt(this.$slots),handleCustomRendering:this.handleCustomRendering}}},render(){const s=[];for(const e of this.customRenderingMap.values())s.push(O(Ct,{key:e.id,customRendering:e}));return O("div",{attrs:{"data-fc-render-id":this.renderId}},O(Ge,s))},mounted(){const s=new Ve;this.handleCustomRendering=s.handle.bind(s);const e=this.buildOptions(this.options),t=new Ue(this.$el,e);this.calendar=t,t.render(),s.subscribe(n=>{this.customRenderingMap=n,this.renderId++,this.needCustomRenderingResize=!0})},beforeUpdate(){this.getApi()?.resumeRendering()},updated(){this.needCustomRenderingResize&&(this.needCustomRenderingResize=!1,this.getApi()?.updateSize())},beforeUnmount(){this.getApi()?.destroy()},watch:Et()}),Ct=te({props:{customRendering:Object},render(){const s=this.customRendering,e=typeof s.generatorMeta=="function"?s.generatorMeta(s.renderProps):s.generatorMeta;return O(qe,{to:s.containerEl},e)}});function Et(){let s={options:{deep:!0,handler(e){let t=this.getApi();t.pauseRendering();let n=this.buildOptions(e);t.resetOptions(n),this.renderId++}}};for(let e in St)s[`options.${e}`]={deep:!0,handler(t){if(t!==void 0){let n=this.getApi();n.pauseRendering(),n.resetOptions({[e]:t},[e]),this.renderId++}}};return s}function wt(s){const e={};for(const t in s)e[xt(t)]=s[t];return e}function xt(s){return s.split("-").map((e,t)=>t?Dt(e):e).join("")}function Dt(s){return s.charAt(0).toUpperCase()+s.slice(1)}function F(s){return s==="Tag"||s==="Monat"?"r":s==="Jahr"?"s":""}var X={code:"de",week:{dow:1,doy:4},buttonText:{prev:"Zurück",next:"Vor",today:"Heute",year:"Jahr",month:"Monat",week:"Woche",day:"Tag",list:"Terminübersicht"},weekText:"KW",weekTextLong:"Woche",allDayText:"Ganztägig",moreLinkText(s){return"+ weitere "+s},noEventsText:"Keine Ereignisse anzuzeigen",buttonHints:{prev(s){return`Vorherige${F(s)} ${s}`},next(s){return`Nächste${F(s)} ${s}`},today(s){return s==="Tag"?"Heute":`Diese${F(s)} ${s}`}},viewHint(s){return s+(s==="Woche"?"n":s==="Monat"?"s":"es")+"ansicht"},navLinkHint:"Gehe zu $0",moreLinkHint(s){return"Zeige "+(s===1?"ein weiteres Ereignis":s+" weitere Ereignisse")},closeHint:"Schließen",timeHint:"Uhrzeit",eventHint:"Ereignis"};function It(s,e){const t=e?.ref||H(),n=H(null),r=e?.dateRange||H(null),i=e?.currentView||H(s.initialView),a=Y(()=>r.value!==null),l={},p={};for(const f in s){const R=s[f];_e(R)?p[f]=R:l[f]=R}function d(){return t.value?.getApi()}const c=Ze(),b=H("de");$e(()=>b.value!==c.value&&!!t.value,async()=>{await Z(),c.value==="en"?d()?.setOption("locale","en"):c.value==="de"&&d()?.setOption("locale",X),b.value=c.value},{immediate:!0});const S={initialDate:Ke(e?.calendarDate)||new Date,initialView:i.value,height:"auto",locale:X,weekNumbers:!0,...l,datesSet:f=>{(!n.value||f.endStr!==n.value.endStr||f.startStr!==n.value.startStr)&&(n.value=f)}};B([n,t],([f,R])=>{if(R&&f){const{start:D,end:ge}=f;r.value={startsAt:D,endsAt:ge}}});function g(){d()?.next()}function y(){d()?.prev()}function u(f){d()?.gotoDate(f)}function m(f,R){d()?.changeView(f,R)}B([i,t],([f,R])=>{!R||!f||m(f)});function h(){d()?.render()}function v(f){d()?.select(f)}function C(){d()?.unselect()}async function E(){await Z(),h()}const de=Y(()=>{const f={...S};for(const R in p)f[R]=p[R].value;return f});e?.calendarDate&&B([Ye(e.calendarDate),t],async([f,R])=>{if(!R)return;f&&u(f);const D=d();e.onChangeDate&&D&&e.onChangeDate({date:f,view:i.value,calendar:D})});function V(f,R=!0){const D=d();D&&D.currentDataManager?.dispatch({type:"SET_RESOURCE_ENTITY_EXPANDED",id:f,isExpanded:R})}function U(f){return!!d()?.currentDataManager?.getCurrentData().resourceEntityExpansions?.[f]}function ce(f){const R=U(f);V(f,!R)}return{options:de,ref:t,dateInfo:n,calendarApi:d,next:g,prev:y,goToDate:u,currentView:i,isDateSet:a,render:h,rerender:E,expandResource:V,isResourceExpanded:U,toggleResourceExpanded:ce,select:v,unselect:C,dateRange:r}}function zt(s){const e=Je({...s,onResult:(n,r)=>{n===!1&&r.revert()},onError:(n,r)=>{r.revert()}});return{...e,asyncRevertFunction:n=>r=>{e.fn(n)(r)}}}export{Ht as D,Nt as F,Pt as T,zt as a,mt as b,yt as c,ht as d,vt as e,ft as f,bt as g,It as u};
