const __vite__fileDeps=["assets/PlanningBoardSpecific-BHf_2uV0.js","assets/index-5ygR7EGk.js","assets/vendor-DP6O45ke.js","assets/vendor-Bi5_IIMz.css","assets/index-DuDPwDMn.js","assets/index-DqnrlXPQ.js","assets/index-Dsay-W0g.js","assets/index-DNLwZrWR.css","assets/index---ixMF9r.js","assets/index-wVhGhdDy.js","assets/index-1M3isq4i.js","assets/index-lYBbO95d.js","assets/index-CAoPmQlD.js","assets/index-Cih2BPF-.js","assets/assignment-events.helpers-CWYDlrj6.js","assets/stairs.helpers-BIn33vMK.js","assets/colorHelpers-Di3bZx5J.js","assets/useIsUserOfRole-CsP1Paeq.js","assets/useRole-C0PbMcty.js","assets/PlanningBoardSpecific-bFCsh4Sx.css","assets/FullCalendarSpecific-DRqqCjgT.js","assets/useFullcalendar-CLA5ahNS.js","assets/index-CsgZOv_I.js","assets/index-DruqRWsa.js","assets/index-C8ho11FL.js","assets/index-vXJwK2G8.js","assets/AssignmentEventName.vue_vue_type_script_setup_true_lang-DS0TEwVk.js","assets/user-capabilities.store-B-DXkmw8.js","assets/arrayById-BY_S6K77.js","assets/user-absences.helpers-CF3rVBoR.js","assets/computedDebounced-DaN6cEOJ.js","assets/FullCalendarSpecific-B7Tcp7Rx.css","assets/UntimedAssignments-MHh3SRgi.js"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{d as Fe,i as Be,b as ot,s as rt,v as it,G as ut,t as dt,I as mt,a as ct,J as we,K as pt,L as ft,M as vt,y as gt,N as yt,O as _t,f as le,F as bt}from"./index-Dsay-W0g.js";import{a as ae,Y as p,b as K,o as V,e as D,f as s,h as t,i as g,t as y,g as A,c as e,ff as wt,eI as Ce,eG as Pe,eH as Re,fv as ke,fw as Ve,u as De,r as j,e0 as kt,az as L,j as M,aA as Vt,l as Oe,fs as We,eo as Ne,en as St,ep as je,m as Me,V as Se,s as q,a3 as At,eF as N,w as Ae,U as se,b0 as Ut,k as z,ah as Ue,e1 as xe,ez as Ie,eA as Te,ax as xt,aB as $e,aO as oe}from"./vendor-DP6O45ke.js";import{a as It}from"./index-5ygR7EGk.js";import{i as Tt}from"./index-CzNUN5hh.js";import{u as $t}from"./index-CsgZOv_I.js";import{_ as Et}from"./SelectAssignmentStatus.vue_vue_type_script_setup_true_lang-DkCPyODJ.js";import{_ as ht}from"./SelectAssignmentEventType.vue_vue_type_script_setup_true_lang-1-5PYO1q.js";import{_ as Ft}from"./SelectProject.vue_vue_type_script_setup_true_lang-D0AdlxPF.js";import{_ as Bt}from"./SelectAssignmentType.vue_vue_type_script_setup_true_lang-BGPxGenl.js";import{_ as Ee}from"./SelectUser.vue_vue_type_script_setup_true_lang-ecQ9vvXJ.js";import{_ as Ct}from"./SelectCustomer.vue_vue_type_script_setup_true_lang-WMN4F6Er.js";import{_ as Pt}from"./SelectAssignment.vue_vue_type_script_setup_true_lang-xX5XNIHx.js";import{_ as Rt}from"./ArtesaTimePickerForCalendar.vue_vue_type_style_index_0_lang-Bin9FMqz.js";import{u as Dt,a as he}from"./useIdObjectMapper-Czi98NfK.js";import{u as ne}from"./useReactiveValueToRef-BYWt6Ger.js";import{u as Ot}from"./useCanJustSeeOwnEvents-C1H8ycv1.js";import"./index-DuDPwDMn.js";import"./index-DqnrlXPQ.js";import"./index-d9TNy9AD.js";import"./useRole-C0PbMcty.js";const Wt=ae({__name:"AssignmentEventStatusTagFilter",props:{modelValue:{type:[String,null],required:!0}},emits:["update:modelValue"],setup(S,{emit:w}){const b=S,T=w,o=p(()=>b.modelValue?b.modelValue==="new"?"Entwurf":b.modelValue==="confirmed"?"geplant":"fertig":"Alle"),U=p(()=>b.modelValue?"dark":"plain"),i=p(()=>b.modelValue?b.modelValue==="new"?"warning":b.modelValue==="confirmed"?"info":"success":"info");function O(k){T("update:modelValue",k)}return(k,d)=>{const _=K("font-awesome-icon"),x=wt,n=Ce,u=Pe,r=Re;return V(),D(r,{trigger:"click",onCommand:O},{dropdown:s(()=>[t(u,null,{default:s(()=>[t(n,{disabled:S.modelValue===null,command:null},{default:s(()=>[g(y(k.$t("All")),1)]),_:1},8,["disabled"]),t(n,{disabled:S.modelValue==="new",command:"new"},{default:s(()=>[g(y(k.$t("timeSheets.draft")),1)]),_:1},8,["disabled"]),t(n,{disabled:S.modelValue==="confirmed",command:"confirmed"},{default:s(()=>[g(y(k.$t("assignmentEventStatus.planned")),1)]),_:1},8,["disabled"]),t(n,{disabled:S.modelValue==="completed",command:"completed"},{default:s(()=>[g(y(k.$t("assignmentEventStatus.done")),1)]),_:1},8,["disabled"])]),_:1})]),default:s(()=>[A("div",null,[t(x,{type:e(i),size:"default",effect:e(U)},{default:s(()=>[g(y(e(o))+" ",1),t(_,{icon:"angle-down",class:"text-xs"})]),_:1},8,["type","effect"])])]),_:1})}}}),Nt={key:0,class:"absolute -top-1.5 -right-1.5 w-3.5 h-3.5 rounded-full bg-danger border border-white z-50"},jt={class:"flex justify-between gap-2"},Mt=ae({__name:"FilterEvents",props:ke({selectUsersByDefault:{type:Boolean,default:!0},hideAssignedUsers:{type:Boolean,default:!1},showResetButton:{type:Boolean,default:!0}},{modelValue:{required:!0},modelModifiers:{},isVisible:{type:Boolean,default:!1},isVisibleModifiers:{}}),emits:ke(["apply","reset"],["update:modelValue","update:isVisible"]),setup(S,{emit:w}){const b=S,T=w,o=Ve(S,"modelValue"),U=Ve(S,"isVisible"),{t:i}=De(),O=Fe(),k=j(!0);kt(()=>{k.value=!1});const d=p(()=>{for(const x in o.value){const n=x;if(n==="assignedUser"&&b.hideAssignedUsers)continue;const u=o.value[n];if(Array.isArray(u)){if(u.length>0)return!0}else if(u!=null)return!0}return!1});function _(){o.value["addressProperty.city"]=null,b.hideAssignedUsers||(o.value.assignedUser=void 0),o.value.assignment=null,o.value.assignmentType=null,o.value.bed=null,o.value.customer=null,o.value.eventTypes=[],o.value.project=null,o.value.serviceWorker=null,o.value.status=null,o.value.assignmentStatusType=null,o.value.postcodeFilter=null,U.value=!1,T("reset")}return(x,n)=>{const u=K("font-awesome-icon"),r=Oe,v=We,c=Ne,h=St,F=je,B=Me;return V(),L("div",null,[t(v,{class:"hidden lg:block"},{default:s(()=>[t(r,{type:"primary",plain:"",size:"default",onClick:n[0]||(n[0]=m=>U.value=!0)},{default:s(()=>[t(u,{icon:"filter",class:"text-xs"}),e(d)?(V(),L("div",Nt)):M("",!0)]),_:1}),e(d)&&S.showResetButton?(V(),D(r,{key:0,plain:"",type:"warning",size:"default",onClick:_},{default:s(()=>[t(u,{icon:"minus"})]),_:1})):M("",!0),Vt(x.$slots,"default")]),_:3}),t(B,{"model-value":e(k)||U.value,class:"dialog-messagebox-[500px] self-start","align-center":"","append-to-body":"","onUpdate:modelValue":n[14]||(n[14]=m=>U.value=m)},{header:s(()=>[t(u,{icon:"filter",class:"text-sm mr-2"}),g(" "+y(e(i)("planningBoard.filter.title")),1)]),footer:s(()=>[A("div",jt,[A("div",null,[e(d)?(V(),D(r,{key:0,text:"",onClick:_},{default:s(()=>[t(u,{icon:"trash-alt",class:"mr-2 text-xs"}),g(" "+y(e(i)("planningBoard.filter.reset")),1)]),_:1})):M("",!0)]),t(r,{type:"primary",onClick:n[13]||(n[13]=()=>U.value=!1)},{default:s(()=>[g(y(e(i)("planningBoard.filter.apply")),1)]),_:1})])]),default:s(()=>[t(F,{"label-width":"130px","label-position":e(O).sm?"left":"top"},{default:s(()=>[t(c,{label:e(i)("assignmentEvent.name")+":"},{default:s(()=>[t(ht,{"model-value":o.value.eventTypes??[],clearable:"","collapse-tags":"","show-select-all":"","clear-on-select-all":"",class:"w-full",multi:!0,"onUpdate:modelValue":n[1]||(n[1]=m=>o.value.eventTypes=m)},null,8,["model-value"])]),_:1},8,["label"]),t(c,{label:e(i)("assignment.name")+":"},{default:s(()=>[t(Pt,{modelValue:o.value.assignment,"onUpdate:modelValue":n[2]||(n[2]=m=>o.value.assignment=m),clearable:"",class:"w-full"},null,8,["modelValue"])]),_:1},8,["label"]),t(c,{label:e(i)("project.property.number")+":"},{default:s(()=>[t(Ft,{modelValue:o.value.project,"onUpdate:modelValue":n[3]||(n[3]=m=>o.value.project=m),clearable:"",class:"w-full"},null,8,["modelValue"])]),_:1},8,["label"]),t(c,{label:e(i)("assignment-types.name")+":"},{default:s(()=>[t(Bt,{modelValue:o.value.assignmentType,"onUpdate:modelValue":n[4]||(n[4]=m=>o.value.assignmentType=m),clearable:"",class:"w-full"},null,8,["modelValue"])]),_:1},8,["label"]),S.hideAssignedUsers?M("",!0):(V(),D(c,{key:0,label:e(i)("planningBoard.filter.assignedEmployees")+":"},{default:s(()=>[t(Ee,{modelValue:o.value.assignedUser,"onUpdate:modelValue":n[5]||(n[5]=m=>o.value.assignedUser=m),clearable:"","show-select-all":"","clear-on-select-all":"","collapse-tags":"",class:"w-full"},null,8,["modelValue"])]),_:1},8,["label"])),t(c,{label:e(i)("assignmentEventStatus.name")+":"},{default:s(()=>[t(Wt,{modelValue:o.value.status,"onUpdate:modelValue":n[6]||(n[6]=m=>o.value.status=m)},null,8,["modelValue"])]),_:1},8,["label"]),t(c,{label:e(i)("assignment.relation.serviceWorker")+":"},{default:s(()=>[t(Ee,{modelValue:o.value.serviceWorker,"onUpdate:modelValue":n[7]||(n[7]=m=>o.value.serviceWorker=m),clearable:"","collapse-tags":"","show-select-all":"","clear-on-select-all":"",class:"w-full"},null,8,["modelValue"])]),_:1},8,["label"]),t(c,{label:e(i)("customer.name")+":"},{default:s(()=>[t(Ct,{modelValue:o.value.customer,"onUpdate:modelValue":n[8]||(n[8]=m=>o.value.customer=m),limit:20,"label-field":["fullName","companyName","email"],clearable:"",class:"w-full"},null,8,["modelValue"])]),_:1},8,["label"]),t(c,{label:e(i)("city")+":"},{default:s(()=>[t(h,{modelValue:o.value["addressProperty.city"],"onUpdate:modelValue":n[9]||(n[9]=m=>o.value["addressProperty.city"]=m),class:"w-full",placeholder:e(i)("assignment.form.addressPropertyShort"),clearable:"",onClear:n[10]||(n[10]=()=>o.value["addressProperty.city"]=null)},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(c,{label:e(i)("assignmentStatusTypes.extendedName")+":"},{default:s(()=>[t(Et,{modelValue:o.value.assignmentStatusType,"onUpdate:modelValue":n[11]||(n[11]=m=>o.value.assignmentStatusType=m),class:"w-full",clearable:""},null,8,["modelValue"])]),_:1},8,["label"]),t(c,{label:e(i)("addresses.postcodeShort")+":"},{default:s(()=>[t(h,{modelValue:o.value.postcodeFilter,"onUpdate:modelValue":n[12]||(n[12]=m=>o.value.postcodeFilter=m),clearable:"",placeholder:e(i)("addresses.postcode")},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1},8,["label-position"])]),_:1},8,["model-value"])])}}});function qt(S){const w=Object.assign({paramsWithAssignedUsers:!0,dateRange:null},S),b=w.companyId?Se(w.companyId):Be(),T=Se(w.dateRange),o=w.eventTypes??q([]),U=w.assignedUser??q(),i=w.assignmentStatusType??q(null),O=w.postcodeFilter??q(null);function k(){return At({"addressProperty.city":null,assignedUser:U,assignment:null,assignmentType:null,bed:null,customer:null,eventTypes:o,project:null,serviceWorker:null,status:null,assignmentStatusType:i,postcodeFilter:O})}const d=k();function _(u){if(d.eventTypes?.length){const r=d.eventTypes.map(v=>v.id);r.length>0&&(u.typeId={$in:r})}}const x=p(()=>{if(!T.value)return null;const u={query:{companyId:b.value,startsAt:{$lt:T.value.endsAt},endsAt:{$gte:T.value.startsAt},$sort:{startsAt:1},$limit:-1}},{query:r}=u;let v=!1;_(r);const{status:c}=d;if(d.status&&(c==="new"?r.confirmedAt=null:c==="completed"?r.completedAt={$ne:null}:c==="confirmed"&&(r.confirmedAt={$ne:null},r.completedAt=null)),e(w.paramsWithAssignedUsers)){const{assignedUser:C}=d;C&&(r["assignedUserEvents.userId"]=C,v=!0)}const{customer:F}=d;F?.id&&(N(r,"assignment.customerId",F.id),v=!0);const{project:B}=d;B?.id&&(N(r,"assignment.projectId",B.id),v=!0);const{assignment:m}=d;m?.id&&(r.assignmentId=m.id);const{assignmentType:P}=d;P?.id&&(N(r,"assignment.typeId",P.id),v=!0);const W=d.serviceWorker;W?.id&&(N(r,"assignment.serviceWorkerId",W.id),v=!0);const $=d["addressProperty.city"];return $&&(N(r,"assignment.addressProperty.city",{$regex:new RegExp(`^.*(${$}).*$`,"gim")}),v=!0),d.assignmentStatusType&&(N(r,"assignment.statusId",d.assignmentStatusType.id),v=!0),d.postcodeFilter&&(N(r,"assignment.addressProperty.zip",{$iLike:`${d.postcodeFilter}%`}),v=!0),v&&(u.resultFrom="server"),u}),n=p(()=>{if(!T.value)return null;const u={query:{companyId:b.value,startsAt:{$lt:T.value.endsAt},endsAt:{$gte:T.value.startsAt},$sort:{startsAt:1},$limit:-1},debounceTime:250,$populateParams:{name:"forPlanningBoard"}},{query:r}=u;_(r);const{status:v}=d;d.status&&(v==="new"?r.confirmedAt=null:v==="completed"?r.completedAt={$ne:null}:v==="confirmed"&&(r.confirmedAt={$ne:null},r.completedAt=null));const{customer:c}=d;if(c?.id&&N(r,"assignment.customerId",c.id),e(w.paramsWithAssignedUsers)){const{assignedUser:$}=d;$&&(r["$assignedUserEvents.userId$"]=$.id)}const{project:F}=d;F?.id&&(r["assignment.projectId"]=F.id);const{assignment:B}=d;B?.id&&(r.assignmentId=B.id);const{assignmentType:m}=d;m?.id&&(r["assignment.typeId"]=m.id);const P=d.serviceWorker;P?.id&&(r["assignment.serviceWorkerId"]=P.id);const W=d["addressProperty.city"];return W&&(r["assignment.addressProperty.city"]={$iLike:`%${W}%`}),d.assignmentStatusType&&(r["assignment.statusId"]=d.assignmentStatusType.id),d.postcodeFilter&&(r["assignment.addressProperty.zip"]={$iLike:`${d.postcodeFilter}%`}),u});return{filters:d,paramsFilter:x,fetchParamsFilter:n}}const zt={id:"view-planning-board"},Lt={class:"flex justify-between items-center gap-1"},Gt={class:"flex items-center mb-2 gap-2"},Jt={class:"flex flex-1 justify-center mb-2"},Ht={class:"flex"},Qt={class:"hidden lg:block mb-2"},Kt={class:"-ml-2"},Yt={class:"mb-2"},Xt={class:"flex"},Zt={key:0,class:"w-52 hidden md:block"},es={class:"w-full flex gap-2 flex-wrap"},ts={class:"-ml-2"},ss=oe(()=>le(()=>import("./PlanningBoardSpecific-BHf_2uV0.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19]))),ns=oe(()=>le(()=>import("./FullCalendarSpecific-DRqqCjgT.js"),__vite__mapDeps([20,21,22,2,3,6,7,23,24,25,26,14,15,16,27,28,29,17,18,30,31]))),ls=oe(()=>le(()=>import("./UntimedAssignments-MHh3SRgi.js"),__vite__mapDeps([32,2,3,6,7,26,15,16]))),Us=ae({__name:"ViewPlanningBoard",setup(S){const w=xt(),b=j(),T=j(),o=j(),U=j(),{t:i}=De(),O=Fe(),k=Be(),d=ot(),_=rt(it.ViewAssemblyBoard,l=>({view:l.literal(["calendar","resource"],{default:"calendar",restore:!0}),res:l.literal(["day","week","month","board"],{default:"board",restore:!0}),types:l.array(l.id(),{default:()=>[],restore:!0}),user:l.id({default:void 0}),status:l.id({default:void 0,restore:!0})})),x=q(!1),n=p({get(){return _.view==="resource"?"resource":"calendar"},set(l){_.view=l}}),u=p({get(){return _.res==="day"?"day":_.res==="week"?"week":_.res==="month"?"month":"board"},set(l){_.res=l}}),r=p(()=>u.value==="day"?i("Day"):u.value==="week"?i("Week"):u.value==="month"?i("calendar.month"):i("planningBoard.name")),v=p(()=>[{resolution:"day",title:i("Day")},{resolution:"week",title:i("Week")},{resolution:"month",title:i("calendar.month")},{resolution:"board",title:i("planningBoard.name")}]),c=j("startsAt"),h=j(!1),F=p(()=>!W(n.value,u.value)),B=p(()=>w.name),m=p(()=>B.value!=="ViewAssemblyBoard"?!1:W(n.value,u.value));Ae(()=>B.value==="ViewAssemblyBoard",()=>{m.value&&U.value?.rerender()}),se(h,()=>{m.value&&U.value?.rerender()});const P=j(m.value);Ae(()=>m.value&&!P.value,()=>{P.value=!0});function W(l,a){return a!=="board"}function $({name:l,resolution:a}){l=l||n.value,a=a||u.value,!(l===n.value&&a===u.value)&&(n.value=l,u.value=a)}const C=q(Ke(new Date,{subOnMonday:!0})),G=q(null),J=q(null),Y=p(()=>F.value?G.value:J.value),qe=ut().createScope(),ze=dt().createScope(),Le=mt().createScope(),Ge=ct(),Je=Dt(ne(_,"types"),qe),He=he(ne(_,"user"),ze),Qe=he(ne(_,"status"),Le),re=Ot(),{filters:R,paramsFilter:ie,fetchParamsFilter:ue}=qt({paramsWithAssignedUsers:!1,eventTypes:Je,dateRange:Y,companyId:k,assignedUser:He,assignmentStatusType:Qe});se(re,l=>{l&&(R.assignedUser=Ge.value)},{immediate:!0});function Ke(l,a){return["month","board"].includes(u.value)?(l=Tt(l)&&a?.subOnMonday?It(l,{weeks:-1}):l,l=we(l)):u.value==="week"?l=we(l):l=Ut(l),l}const Ye=p(()=>["month","board"].includes(u.value)||u.value==="week"?"week":"date"),Xe=p(()=>u.value==="board"?o.value?.stepsMove??1:u.value==="month"?2:1),de=pt().createScope(),{data:H,isPending:me}=de.useFeathersItems({params:ie,fetchParams:ue}),ce=p(()=>H.value.map(l=>l.id).filter(bt)),Ze=p(()=>[...new Set(H.value.map(l=>l.assignmentId))]);ft({items:Ze,debounceTime:250,action:async l=>{(await yt.service("assignment-events-last-completed").find({query:{assignmentIds:l}})).forEach(I=>de.construct(I))}});const et=vt().createScope(),{data:X}=et.useFindOnce({items:ce,params:p(()=>({query:{eventId:{$in:ce.value}}})),fetchParams:l=>({query:{eventId:{$in:l},$limit:-1}}),debounceTime:150}),tt=gt().createScope(),{data:pe}=tt.useFind({params:p(()=>{if(!Y.value)return null;const{startsAt:l,endsAt:a}=Y.value;return!k.value||!l||!a?null:{query:{companyId:k.value,startsAt:{$lt:a},endsAt:{$gt:l},$limit:-1}}})}),fe=p(()=>R.assignedUser?[R.assignedUser.id]:[]),st=p(()=>{const l=fe.value;return X.value.filter(a=>l.includes(a.userId))}),ve=p(()=>{if(u.value!=="board"||!fe.value.length)return H.value;const l=st.value.map(a=>a.eventId);return H.value.filter(a=>l.includes(a.id))});function ge(l){_t({name:"AssemblyBoard.DetailedAssignment",params:{assignmentId:l.assignmentId.toString()}})}let Q;return se(b,l=>{if(Q&&(Q.destroy(),Q=null),l)try{Q=new $t(l.$el,{itemSelector:".drag-assignment-event"})}catch(a){console.error(a)}}),(l,a)=>{const I=K("font-awesome-icon"),E=Oe,ye=Ce,_e=Pe,be=Re,Z=We,nt=K("router-view"),ee=Ne,lt=je,at=Me;return V(),L("div",zt,[A("div",Lt,[A("div",Gt,[e(m)?(V(),D(E,{key:0,type:e(h)?"primary":void 0,class:"!hidden md:!block",onClick:a[0]||(a[0]=()=>h.value=!e(h))},{default:s(()=>[t(I,{icon:["far","calendar-plus"]})]),_:1},8,["type"])):M("",!0),t(Mt,{ref_key:"refFilterEvents",ref:T,modelValue:e(R),"onUpdate:modelValue":a[1]||(a[1]=f=>z(R)?R.value=f:null),"hide-assigned-users":e(re),"show-reset-button":e(O).md},null,8,["modelValue","hide-assigned-users","show-reset-button"])]),A("div",Jt,[A("div",Ht,[t(Rt,{modelValue:e(C),"onUpdate:modelValue":a[2]||(a[2]=f=>z(C)?C.value=f:null),"class-button-today":"hidden md:block",resolution:e(Ye),step:e(Xe)},null,8,["modelValue","resolution","step"])])]),A("div",Qt,[t(Z,null,{default:s(()=>[t(E,{type:e(n)==="calendar"?"primary":void 0,onClick:a[3]||(a[3]=()=>$({name:"calendar"}))},{default:s(()=>[t(I,{icon:["far","calendar-alt"],class:"text-xs"})]),_:1},8,["type"]),t(E,{type:e(n)==="resource"?"primary":void 0,onClick:a[4]||(a[4]=()=>$({name:"resource"}))},{default:s(()=>[t(I,{icon:"user",class:"text-xs"})]),_:1},8,["type"]),t(be,{"hide-on-click":!1},{dropdown:s(()=>[t(_e,null,{default:s(()=>[(V(!0),L(Ue,null,xe(e(v),({resolution:f,title:te})=>(V(),D(ye,{key:f,disabled:e(u)===f,onClick:()=>$({resolution:f})},{default:s(()=>[A("div",Kt,[t(I,{icon:"check","fixed-width":"",class:$e(["mr-1 text-xs",{"opacity-0":e(u)!==f}])},null,8,["class"]),g(" "+y(te),1)])]),_:2},1032,["disabled","onClick"]))),128))]),_:1})]),default:s(()=>[t(E,null,{default:s(()=>[g(y(e(r))+" ",1),t(I,{icon:"angle-down",class:"ml-1 text-xs"})]),_:1})]),_:1})]),_:1})]),A("div",Yt,[t(E,{type:"primary",onClick:a[5]||(a[5]=()=>x.value=!0)},{default:s(()=>[t(I,{icon:"cog",class:"text-xs"})]),_:1})])]),A("div",Xt,[e(h)&&e(m)?(V(),L("div",Zt,[g(y(l.$t("underminedOrders"))+" ",1),t(e(ls),{ref_key:"refUntimedAssignments",ref:b,params:e(ie)??void 0,"fetch-params":e(ue)??void 0,class:"mr-2"},null,8,["params","fetch-params"])])):M("",!0),A("div",null,[Ie(t(e(ss),{ref_key:"refPlanningBoard",ref:o,dateRange:e(G),"onUpdate:dateRange":a[6]||(a[6]=f=>z(G)?G.value=f:null),items:e(ve),"is-pending":e(me),view:e(n),"start-date":e(C),"event-types":e(R).eventTypes?e(R).eventTypes:void 0,"event-users":e(X),holidays:e(pe),onClickedItem:ge},null,8,["dateRange","items","is-pending","view","start-date","event-types","event-users","holidays"]),[[Te,e(F)]]),e(P)?Ie((V(),D(e(ns),{key:0,ref_key:"refFullCalendar",ref:U,dateRange:e(J),"onUpdate:dateRange":a[7]||(a[7]=f=>z(J)?J.value=f:null),startDate:e(C),"onUpdate:startDate":a[8]||(a[8]=f=>z(C)?C.value=f:null),"is-pending":e(me),events:e(ve),"event-types":e(R).eventTypes,holidays:e(pe),"event-users":e(X),view:e(n),resolution:e(u)==="board"?"week":e(u),onClickedItem:ge},null,8,["dateRange","startDate","is-pending","events","event-types","holidays","event-users","view","resolution"])),[[Te,e(m)]]):M("",!0)])]),t(nt),e(x)?(V(),D(at,{key:0,modelValue:e(x),"onUpdate:modelValue":a[14]||(a[14]=f=>z(x)?x.value=f:null),class:"dialog-messagebox-[500px] self-start"},{header:s(()=>[t(I,{icon:"cog",class:"mr-2 text-xs"}),g(" "+y(e(i)("planningBoard.settings.title")),1)]),default:s(()=>[t(lt,{"label-width":"130px","label-position":e(O).xs?"left":"top"},{default:s(()=>[t(ee,{label:e(i)("planningBoard.settings.View")+":"},{default:s(()=>[A("div",es,[t(Z,null,{default:s(()=>[t(E,{type:e(n)==="calendar"?"primary":void 0,onClick:a[9]||(a[9]=()=>$({name:"calendar"}))},{default:s(()=>[t(I,{icon:["far","calendar-alt"],class:"text-xs mr-1"}),g(" "+y(e(i)("calendar.calendar")),1)]),_:1},8,["type"]),t(E,{type:e(n)==="resource"?"primary":void 0,onClick:a[10]||(a[10]=()=>$({name:"resource"}))},{default:s(()=>[t(I,{icon:"user",class:"text-xs mr-1"}),g(" "+y(e(i)("Employee")),1)]),_:1},8,["type"])]),_:1}),t(be,null,{dropdown:s(()=>[t(_e,null,{default:s(()=>[(V(!0),L(Ue,null,xe(e(v),({resolution:f,title:te})=>(V(),D(ye,{key:f,disabled:e(u)===f,onClick:()=>$({resolution:f})},{default:s(()=>[A("div",ts,[t(I,{icon:"check","fixed-width":"",class:$e(["mr-1 text-xs",{"opacity-0":e(u)!==f}])},null,8,["class"]),g(" "+y(te),1)])]),_:2},1032,["disabled","onClick"]))),128))]),_:1})]),default:s(()=>[t(E,null,{default:s(()=>[g(y(e(r))+" ",1),t(I,{icon:"angle-down",class:"ml-1 text-xs"})]),_:1})]),_:1})])]),_:1},8,["label"]),t(ee,{label:e(i)("planningBoard.settings.Sorting")+":"},{default:s(()=>[t(Z,null,{default:s(()=>[t(E,{type:e(c)==="startsAt"?"primary":void 0,onClick:a[11]||(a[11]=()=>c.value="startsAt")},{default:s(()=>[g(y(e(i)("Date")),1)]),_:1},8,["type"]),t(E,{type:e(c)==="assignment.serviceWorkerId"?"primary":void 0,onClick:a[12]||(a[12]=()=>c.value="assignment.serviceWorkerId")},{default:s(()=>[g(y(e(i)("assignment.relation.serviceWorker")),1)]),_:1},8,["type"])]),_:1})]),_:1},8,["label"]),t(ee,{label:e(i)("planningBoard.settings.Text")+":"},{default:s(()=>[t(E,{onClick:a[13]||(a[13]=()=>e(d).toggleAssignmentNameToShow())},{default:s(()=>[g(y(e(d).assignmentNameToShow==="name"?e(i)("assignment.property.name"):e(d).assignmentNameToShow==="number"?e(i)("assignment.property.number"):e(d).assignmentNameToShow==="addressProperty"?e(i)("assignment.relation.addressProperty"):e(d).assignmentNameToShow==="customer"?e(i)("assignment.relation.customer"):""),1)]),_:1})]),_:1},8,["label"])]),_:1},8,["label-position"])]),_:1},8,["modelValue"])):M("",!0)])}}});export{Us as default};
